<!DOCTYPE html>
<html lang="en">
<head>
    <title>Techshack Weekly </title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://www.soasme.com/techshack.weekly/theme/css/main.css" type="text/css" />
        <link href="https://www.soasme.com/techshack.weekly/" type="application/atom+xml" rel="alternate" title="Techshack Weekly ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie.css"/>
                <script src="https://www.soasme.com/techshack.weekly/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie6.css"/><![endif]-->

</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-2"></div>
            <div id="content" class="col-lg-6">
                <div class="entry">
        
        

 
                <section id="content" class="body">
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/75db733e-c2d9-4da4-a0d0-134c77963c9d.html" rel="bookmark"
                                title="Permalink to ETCD 的运维"
                                >ETCD 的运维</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://kubernetes.io/docs/tasks/administer-cluster/configure-upgrade-etcd/">查看原文</a></p>
<p>本文是 Kubernetes 关于如何运维 etcd 的文档。</p>
<ul>
<li>生产环境建议使用五个节点，需要启动 etcd, 可以在外面套一层 load balancer</li>
<li>由于访问 etcd 数据相当于得到了 k8s 集群的所有核心数据，所以通讯层需要做 tls 加密：使用 <code>peer.key</code> / <code>peer.cert</code> 在节点成员通讯时加密，使用 <code>client.key</code>/ <code>client.cert</code> 在与客户端通讯时加密。<ul>
<li>可以通过 <code>--trusted-ca-file</code> / <code>--client-cert-auth=true</code> 限制只有 k8s api server 允许访问 etcd 数据。</li>
</ul>
</li>
<li>节点失效可以通过 <code>etcdctl member remove</code> / <code>etcdctl add memberN …</code></li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/75db733e-c2d9-4da4-a0d0-134c77963c9d.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/4f301f61-2838-4f12-a4d4-f801140df1a1.html" rel="bookmark"
                                title="Permalink to 源码阅读 - cat 的 MINIX3 实现"
                                >源码阅读 - cat 的 MINIX3 实现</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://github.com/Stichting-MINIX-Research-Foundation/minix/blob/master/bin/cat/cat.c">查看原文</a></p>
<p>这个文件是 MINIX 3 的 cat 实现，其实是 NetBSD cat 的移植。main 函数解析参数，然后用 <code>O_RDONLY|O_NONBLOCK</code> 逐个打开输入的文件，做一些基本的 stat, st mode 检查后，使用 read 读输入流，使用 write 写到 输出流。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/4f301f61-2838-4f12-a4d4-f801140df1a1.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/63251214-6501-43f0-b587-0934dfac12e4.html" rel="bookmark"
                                title="Permalink to Monolithic OS 是有缺陷的"
                                >Monolithic OS 是有缺陷的</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="http://ts.data61.csiro.au/publications/csiro_full_text/Biggs_LH_18.pdf">查看原文</a></p>
<p>这篇论文论证的问题是 Monolithic OS 在设计上导致了更多安全问题，他们基于的数据是历年的安全漏洞报告。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/63251214-6501-43f0-b587-0934dfac12e4.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/668ec94c-71a3-464a-8c93-c164c669a33e.html" rel="bookmark"
                                title="Permalink to PyPI 检查被社工的密码"
                                >PyPI 检查被社工的密码</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://caremad.io/posts/2018/08/pypi-compromised-passwords/">查看原文</a></p>
<p>@dstufft 就近期 NPM 密码泄漏做了一次实验：用户登录的时候拿表单密码跟 HIBP 社工库数据做比对，结论是至少 0.7% 的用户被泄漏的密码也用在 PyPI 上，特别的，在 36 小时的实验中，这些用户发布的库在过去三十天内有近三百万的下载。</p>
<p>结论：麻烦每网站一密码，谢谢合作。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/668ec94c-71a3-464a-8c93-c164c669a33e.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/d4938dae-9ef3-44ef-b849-7f51a8d255e7.html" rel="bookmark"
                                title="Permalink to TimescaleDB vs InfluxDB"
                                >TimescaleDB vs InfluxDB</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://blog.timescale.com/timescaledb-vs-influxdb-for-time-series-data-timescale-influx-sql-nosql-36489299877">查看原文</a></p>
<p>本文比较了 TimescaleDB 和 InfluxDB 这两款 TSDB，结论是各有千秋。利益相关方：TimescaleDB 的人写的。</p>
<ul>
<li>TimescaleDB 基于 Postgres 做扩展，天生自带了这些好处：成熟的运维工具，完整的 SQL 语法和 ORM 库支持。</li>
<li>InfluxDB 从头撸起，需要自己做运维工具，搞了一套类 SQL - InfluxQL, 以及下一代 Flux，但都需要一些学习曲线。</li>
<li>InfluxDB 相应的好处：高度优化的数据存储模型，更高效的简单时间序列数据查询和插入效率。</li>
</ul>
<p>简单结论：如果对存储有高要求，用 InfluxDB；如果对运维和客户端使用有高要求，用 TimescaleDB。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/d4938dae-9ef3-44ef-b849-7f51a8d255e7.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/0441ba74-70b6-44be-b8b6-cbd7c7fd8adc.html" rel="bookmark"
                                title="Permalink to A Basic Just-In-Time Compiler"
                                >A Basic Just-In-Time Compiler</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://nullprogram.com/blog/2015/03/19/">查看原文</a></p>
<p>本文介绍如何写一个最基本的 JIT 编译器。</p>
<ul>
<li>第一个挑战是内存分配。在进程内存模型，只有页中有设置 execution bit, 页中的代码才能执行。为了运行时安全，我们要把 write bit 关掉，execution bit 打开，否则攻击者可以发动攻击，篡改代码。</li>
<li>第二个挑战是指令缓存。Malloc 返回的内存只能读写不能运行，所以我们只能用 mmap。获得内存后，使用 mprotect 将内存数据设为 <code>PROT_READ | PROT_EXEC</code>. 销掉内存这用 munmap.</li>
<li>第三个挑战是调用编译好的代码。基本思路是使用 <code>rdi, rax, and rdx</code> 这三个寄存器，设置它们三个的指令序列就能调函数了。记得在设置完 <code>rax</code> 后再编译个 <code>ret</code> 返回寄存器里的值。</li>
</ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/0441ba74-70b6-44be-b8b6-cbd7c7fd8adc.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/19936cbc-0a7a-4ba4-b04a-96156447407d.html" rel="bookmark"
                                title="Permalink to GraphML - 一种画图结构的 XML 扩展"
                                >GraphML - 一种画图结构的 XML 扩展</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="http://graphml.graphdrawing.org/primer/graphml-primer.html">查看原文</a></p>
<p>本文是 GraphML 的 Getting Started 文档，其手册可以在 <a href="http://graphml.graphdrawing.org/specification.html">Specification</a> 页查看。这个工具可以让我们使用 XML 定义 Graph, Node, Edge。如果说要跟 SVG 这样的通用画图格式相比，GraphML 的优势应该是它更高一级的抽象。</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;graphml</span> <span class="na">xmlns=</span><span class="s">&quot;http://graphml.graphdrawing.org/xmlns&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://graphml.graphdrawing.org/xmlns</span>
<span class="s">     http …</span></code></pre></div>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/19936cbc-0a7a-4ba4-b04a-96156447407d.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/6a89f04e-20a6-4342-a76a-bb9539a081a6.html" rel="bookmark"
                                title="Permalink to Git Reflog 图解"
                                >Git Reflog 图解</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://twitter.com/b0rk/status/1028856091369787392">查看原文</a></p>
<p>这则推文介绍了 <code>git reflog</code>。简单来说 git 会录制你的所有操作(commit, checkout, rebase, 等等），如果你觉得代码写的不好，想退回之前的某个点，可以用 <code>git reflog</code> 找到那个检查点，然后用 <code>git reset --hard HEAD@{3}</code> 这样的方法跳回去。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/6a89f04e-20a6-4342-a76a-bb9539a081a6.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/e29dd950-4902-45ee-8cb1-41dd5855d810.html" rel="bookmark"
                                title="Permalink to Vibora - 一款高性能的 Python Web Framework"
                                >Vibora - 一款高性能的 Python Web Framework</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://github.com/vibora-io/vibora">查看原文</a></p>
<p>Vibora 是最近新出的一款 Python Web 框架。它跟 Flask 有很多设计相近的地方，有一样的路由 API，不过取消了 thread local 的 request 设计，添加了 async 支持，热点地方用 Cython 实现。目前在处于早期开发阶段，接口不太稳定。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/e29dd950-4902-45ee-8cb1-41dd5855d810.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/f8c8a735-adc5-432f-bbd2-d3f4f7a70f3c.html" rel="bookmark"
                                title="Permalink to Python 代码打包 Overview"
                                >Python 代码打包 Overview</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://packaging.python.org/overview/">查看原文</a></p>
<p>本文是 PyPA 打包系列的 Overview 文章，讲述了打包代码的很多知识。</p>
<ul>
<li>打包是给部署用的，所以其实要先搞懂你打算如何部署。</li>
<li>打包单个 module 比较少见，但也有这样的需求, 参考 bottle.py 这类库。</li>
<li>更多见的需求可能会是 把 module 装进 package, 然后使用 sdist 分发（其实就是 .tar.gz）。后者比较适合纯 Python 代码的发布。</li>
<li>也有一些库有 C 的以来，那就要推荐发二进制包, 发布的时候给出 wheel 包给预编译好的平台，sdist 包给那些没预编译的平台。</li>
<li>有些平台例如 Heroku，GAE 等等有自己的打包流程。</li>
<li>桌面端或者手机端发布目前不是 Python 的强项，但也有 Kivy, Beeware …</li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/f8c8a735-adc5-432f-bbd2-d3f4f7a70f3c.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>

<p class="paginator">
        <a href="https://www.soasme.com/techshack.weekly/category/verses11.html">&laquo;</a>
    Page 12 / 54
        <a href="https://www.soasme.com/techshack.weekly/category/verses13.html">&raquo;</a>
</p>
            </section><!-- /#content -->

                </div>

                <hr>
                <div id="footer" class="col-lg-12">
                    <nav>
                        <ul>
                        </ul>
                    </nav>
                </div>
            </div>
            <div id="sidebar" class="col-lg-4">
                <h1>
                    <a href="https://www.soasme.com/techshack.weekly " title="Techshack Weekly">
                        <img src="https://www.soasme.com/techshack.weekly/images/logo-200x50.png" />
                    </a>
                </h1>
                <span class="description"> </span>
                <div><div class="entry-subscription">
    <h5>Techshack Weekly</h5>
    <br>
    专注于后端技术阅读
    <br>
    目前有上百位订阅者。
    <br>
    订阅 <a href="https://www.soasme.com/techshack.weekly/feeds/issues.atom.xml">RSS</a>
    <br>
    欢迎加入 <a href="https://t.me/techshack">Telegram Channel</a> ，
    <br>
    <iframe src="https://tgwidget.com/widget/count/?id=5a66b26483ba88e7118b4568" frameborder="0" scrolling="no" horizontalscrolling="no" verticalscrolling="no" width="160px" height="50px" async></iframe>
    <br>
    关注推特 <a href="https://twitter.com/techshackweekly">@techshackweekly</a>。
    <br>
    <a href="https://twitter.com/TechshackWeekly?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow @TechshackWeekly</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <hr>
</div></div>
                <div><!-- Begin MailChimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
    #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif;  width:250px;}
    /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
       We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://soasme.us17.list-manage.com/subscribe/post?u=617c1cb80ba1b0cbf828df387&amp;id=10442a8ee6" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
    <label for="mce-EMAIL">Subscribe to our mailing list</label>
    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_617c1cb80ba1b0cbf828df387_10442a8ee6" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup--></div>
                    <div>:: <a href="https://www.soasme.com/techshack.weekly/categories.html">Categories</a></div>
                <!-- <span class="feed"><a href="">RSS</a> | <a href="">Atom</a></span> -->
            </div>
            <div class="col-lg-2"></div>
        </div>
    </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-36183732-2");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>