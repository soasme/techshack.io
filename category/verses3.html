<!DOCTYPE html>
<html lang="en">
<head>
    <title>Techshack Weekly </title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://www.soasme.com/techshack.weekly/theme/css/main.css" type="text/css" />
        <link href="https://www.soasme.com/techshack.weekly/" type="application/atom+xml" rel="alternate" title="Techshack Weekly ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie.css"/>
                <script src="https://www.soasme.com/techshack.weekly/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie6.css"/><![endif]-->

</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-2"></div>
            <div id="content" class="col-lg-6">
                <div class="entry">
        
        

 
                <section id="content" class="body">
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/da1002e3-2c7f-4c9f-9ebf-57837f31d74b.html" rel="bookmark"
                                title="Permalink to AWS CNI Proposal"
                                >AWS CNI Proposal</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://github.com/aws/amazon-vpc-cni-k8s/blob/master/docs/cni-proposal.md">查看原文</a></p>
<p>AWS VPS CNI K8S</p>
<p>本文是 aws-cni 的设计文档。AWS Kubernetes CNI 插件可用于在 EKS 中提供类似 Flannel, Calico 这类网络软件的功能 - 为 Pod 配置必要的网络。</p>
<p>更具体的，它的设计目标：
* 为成为 kubernetes 节点的每个 ec2 实例创建多个 Elastic network interface（ENI），分配二级 IP 地址
* 为每个 Pod 挑选一个可用的二级 IP 地址，把主机跟 Pod 的网络连起来，允许 Pod-Pod, Pod-PodInAnotherHost, Pod-AWSService, Pod-DC, Pod-Internet 多个级别的通信。</p>
<p>它的需求是 …</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/da1002e3-2c7f-4c9f-9ebf-57837f31d74b.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/e6b75fe4-80e0-4e8a-ad82-5473ad74f529.html" rel="bookmark"
                                title="Permalink to Whats new in Python_3_7"
                                >Whats new in Python_3_7</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://speakerdeck.com/matrixise/whats-new-in-python-3-dot-7">查看原文</a></p>
<p>Python 3.7 的新货。</p>
<ul>
<li>内建 breakpoint() 函数，在需要的地方插上 <code>breakpoint()</code> 就能启动调试了。以及，可以通过 PYTHONBREAKPOINT 环境变量配置想用什么软件做当调试器，例如 web-pdb</li>
<li>Data Class 单纯的数据类，可以约束乱用 dict 的现象。</li>
<li>可以在 module 级别写 <code>__getattr__</code> // 有点像 quixote 的 <code>_q_lookup</code>..</li>
<li>也可以在 module 级别写 <code>__dir()__ -&gt; List[str]</code></li>
<li>time.time_ns() 可以获得纳秒时间了，适合在 performance 排查时使用。</li>
<li>DeprecationWarning 只在测试和 <strong>main</strong> 的时候启用。</li>
<li>可用标准库的 <code>contextvars …</code></li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/e6b75fe4-80e0-4e8a-ad82-5473ad74f529.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/40288b32-c0f1-4cbb-9dcd-cb3803809384.html" rel="bookmark"
                                title="Permalink to GlusterFS Architecture"
                                >GlusterFS Architecture</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://docs.gluster.org/en/latest/Quick-Start-Guide/Architecture/">查看原文</a></p>
<p>GlusterFS 是一个分布式的文件系统，基本存储单元是 Brick，一组 Bricks 组成一个 Volume，一个 Volume 通过 FUSE 挂载到 Mount Point 上。大多数操作的基本单元是 Volume。</p>
<p>GlusterFS 可以使用多种 Volume：</p>
<ul>
<li>默认：文件存储于单个 Brick 上。这也意味着数据可能因为硬件原因造成丢失。
  <img alt="Distributed Volume" src="https://cloud.githubusercontent.com/assets/10970993/7412364/ac0a300c-ef5f-11e4-8599-e7d06de1165c.png" title="Distributed Volume"></li>
<li>Replicated Glusterfs Volume: 文件 Replicate 到多个 Bricks 上。一般首选该模式。
  <img alt="Replicated Clusterfs Volume" src="https://cloud.githubusercontent.com/assets/10970993/7412379/d75272a6-ef5f-11e4-869a-c355e8505747.png"></li>
<li>Distributed Replicated Glusterfs Volume: 文件 Replicate 到某个 Volume 的多个 Bricks 上。
  <img alt="Distributed Replicated Glusterfs Volume" src="https://cloud.githubusercontent.com/assets/10970993/7412402/23a17eae-ef60-11e4-8813-a40a2384c5c2.png"></li>
<li>Striped Glusterfs Volume …</li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/40288b32-c0f1-4cbb-9dcd-cb3803809384.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/a0dead75-ecf6-40ff-a123-6ea14f15ce66.html" rel="bookmark"
                                title="Permalink to GlusterFS Quickstart"
                                >GlusterFS Quickstart</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://docs.gluster.org/en/latest/Quick-Start-Guide/Quickstart/">查看原文</a></p>
<p>安装 GlusterFS 需要至少 3台服务器，每台服务器一块 disk 装 OS，另一块放数据。需要在每台机器上把 <code>/data</code> 目录建在 <code>/dev/sdb1</code> (假设是这块 disk），然后配置到 <code>/etc/fstab</code> 中，可通过 mount 立即挂载。需要启动 glusterfs-server, 配置防火墙，每台 server 需要配置对应集群机器的 peer probe。最后集群启动好以后就可以通过 <code>gluster volume create</code> 创建 Volume。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/a0dead75-ecf6-40ff-a123-6ea14f15ce66.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/b95d451a-8928-4653-a4fd-82d989c57c3e.html" rel="bookmark"
                                title="Permalink to Stellar - A Simplified Container System"
                                >Stellar - A Simplified Container System</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://github.com/ehazlett/stellar">查看原文</a></p>
<p>Stellar 是一个低功耗的 kubernetes 替代方案。使用 containerd 运行容器，CNI 搭建 multihost 网络，普通 DNS 做服务发现，NATS 实现集群的事件系统。</p>
<p>部署需要：安装 containerd, 把 sctl, stellar, stellar-cni-ipam 丢进 $BIN, 然后添加配置，在多节点上运行即可。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/b95d451a-8928-4653-a4fd-82d989c57c3e.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/18544b0c-6f3a-42bd-acbe-557e461313f5.html" rel="bookmark"
                                title="Permalink to Observability time series vs logging vs tracing"
                                >Observability time series vs logging vs tracing</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://kubedex.com/observability-time-series-vs-logging-vs-tracing/">查看原文</a></p>
<p>本文就 Monitoring 涉及到的三种数据结构：Time Series, Log Event, Tracing Span 提供了通用解决方案。</p>
<p><img alt="" src="https://i0.wp.com/kubedex.com/wp-content/uploads/2018/10/Screen-Shot-2018-10-18-at-14.38.51.png?resize=1024%2C441&amp;ssl=1"></p>
<ul>
<li>TimeSeries: 监控的时间序列数据，自搭首选 Prometheus，买服务用 DataDog。InfluxDB 可以作为 Prometheus 的另外一个方案。不推荐 Cassandra， Elastic，写性能太差。</li>
<li>Log Event: 应用产生的日子条目，数据量大，自搭首选 Elastic 全家桶，买服务用 Splunk。这里的日志特指已经把日志解析成 JSON 这样的结构化数据。</li>
<li>Tracing：服务追踪产生的数据，首选 Jaeger(k8s), Zipkin，OpenAPM。这类服务太贵了，建议自搭。</li>
</ul>
<p>结论：要想做好服务的 Observability，这三类数据是无论如何要收集好的 …</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/18544b0c-6f3a-42bd-acbe-557e461313f5.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/25190cf0-7cd6-4040-9fa1-312bd4ba5684.html" rel="bookmark"
                                title="Permalink to File parts in pathlib"
                                >File parts in pathlib</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://amir.rachum.com/blog/2018/06/29/file-parts/">查看原文</a></p>
<p>本文给出文件路径的几个部分的术语：</p>
<p><img alt="" src="https://amir.rachum.com/images/posts/file-parts.PNG"></p>
<p><code>/path/to/README.en.md</code>:</p>
<ul>
<li>root: /</li>
<li>parent: /path/to</li>
<li>stem: README.en</li>
<li>suffix: .md</li>
<li>suffixes: .en.md</li>
<li>name: README.en.md</li>
</ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/25190cf0-7cd6-4040-9fa1-312bd4ba5684.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/e0acf8ee-35f7-4fb2-9c5a-b84b4880102b.html" rel="bookmark"
                                title="Permalink to Envoy and gRPC-Web - an alternative to REST"
                                >Envoy and gRPC-Web - an alternative to REST</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://blog.envoyproxy.io/envoy-and-grpc-web-a-fresh-new-alternative-to-rest-6504ce7eb880">查看原文</a></p>
<p>本文描述了这样一套框架：使用 gRPC-web 作为前端，gRPC 作为通信协议，Envoy 作为暴露 gRPC 服务的代理。如果后端的各种内部服务都选用 gRPC 接口的话，这套方法可以作为 REST 的替代品，毕竟干嘛不全部用一套接口呢。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/e0acf8ee-35f7-4fb2-9c5a-b84b4880102b.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/e151c011-b4da-4b01-959a-f6ab37ada8f5.html" rel="bookmark"
                                title="Permalink to Tabnine - all-language autocompleter"
                                >Tabnine - all-language autocompleter</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://tabnine.com/">查看原文</a></p>
<p>Tabnine 是一款用机器学习模型的思路做 autocompleter。经过试用我觉得对于曾经写过的代码，要写类似代码的时候表现的很惊艳。</p>
<p>基本思路：项目代码排除 gitignore 后以后的文件，进入 Text Domain，算出 words。写代码的时候，编辑器插件发出即时 query，比对接下来要打哪些字。</p>
<p>项目超过 200kb 的话需要买 license。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/e151c011-b4da-4b01-959a-f6ab37ada8f5.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/e915e6c8-6de7-46ef-a7c6-9ad2c0eec4da.html" rel="bookmark"
                                title="Permalink to What I learned by bringing down linkedin"
                                >What I learned by bringing down linkedin</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://venturebeat.com/2018/10/13/what-i-learned-by-bringing-down-linkedin-com/">查看原文</a></p>
<p>Linkedin 的 SRE 工程师搞挂了一个多小时的网站。起因是把线上环境弄脏了，回滚的时候又把一半的服务拿去做滚动升级，最后发生了雪崩 - 剩下的那一半服务器不够承载流量直到挂了。</p>
<p>事故管理：大部分事故都不是一个人的责任，它一定是环环相扣导致的。事故管理对事故不对人，找到原因，做出改进，就这样。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/e915e6c8-6de7-46ef-a7c6-9ad2c0eec4da.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>

<p class="paginator">
        <a href="https://www.soasme.com/techshack.weekly/category/verses2.html">&laquo;</a>
    Page 3 / 54
        <a href="https://www.soasme.com/techshack.weekly/category/verses4.html">&raquo;</a>
</p>
            </section><!-- /#content -->

                </div>

                <hr>
                <div id="footer" class="col-lg-12">
                    <nav>
                        <ul>
                        </ul>
                    </nav>
                </div>
            </div>
            <div id="sidebar" class="col-lg-4">
                <h1>
                    <a href="https://www.soasme.com/techshack.weekly " title="Techshack Weekly">
                        <img src="https://www.soasme.com/techshack.weekly/images/logo-200x50.png" />
                    </a>
                </h1>
                <span class="description"> </span>
                <div><div class="entry-subscription">
    <h5>Techshack Weekly</h5>
    <br>
    专注于后端技术阅读
    <br>
    目前有上百位订阅者。
    <br>
    订阅 <a href="https://www.soasme.com/techshack.weekly/feeds/issues.atom.xml">RSS</a>
    <br>
    欢迎加入 <a href="https://t.me/techshack">Telegram Channel</a> ，
    <br>
    <iframe src="https://tgwidget.com/widget/count/?id=5a66b26483ba88e7118b4568" frameborder="0" scrolling="no" horizontalscrolling="no" verticalscrolling="no" width="160px" height="50px" async></iframe>
    <br>
    关注推特 <a href="https://twitter.com/techshackweekly">@techshackweekly</a>。
    <br>
    <a href="https://twitter.com/TechshackWeekly?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow @TechshackWeekly</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <hr>
</div></div>
                <div><!-- Begin MailChimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
    #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif;  width:250px;}
    /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
       We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://soasme.us17.list-manage.com/subscribe/post?u=617c1cb80ba1b0cbf828df387&amp;id=10442a8ee6" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
    <label for="mce-EMAIL">Subscribe to our mailing list</label>
    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_617c1cb80ba1b0cbf828df387_10442a8ee6" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup--></div>
                    <div>:: <a href="https://www.soasme.com/techshack.weekly/categories.html">Categories</a></div>
                <!-- <span class="feed"><a href="">RSS</a> | <a href="">Atom</a></span> -->
            </div>
            <div class="col-lg-2"></div>
        </div>
    </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-36183732-2");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>