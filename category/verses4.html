<!DOCTYPE html>
<html lang="en">
<head>
    <title>Techshack Weekly </title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://www.soasme.com/techshack.weekly/theme/css/main.css" type="text/css" />
        <link href="https://www.soasme.com/techshack.weekly/" type="application/atom+xml" rel="alternate" title="Techshack Weekly ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie.css"/>
                <script src="https://www.soasme.com/techshack.weekly/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie6.css"/><![endif]-->

</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-2"></div>
            <div id="content" class="col-lg-6">
                <div class="entry">
        
        

 
                <section id="content" class="body">
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/f4e8cece-9d04-4e0b-acf8-3c9e77250f96.html" rel="bookmark"
                                title="Permalink to Think twice before using Helm"
                                >Think twice before using Helm</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://medium.com/virtuslab/think-twice-before-using-helm-25fbb18bc822">查看原文</a></p>
<p>本文作者的一家之言是使用 Helm 之前需要三思，列举了几样 Helm 的缺点，想使用 Helm 的同学一定要想清楚怎么克服这些困难。</p>
<ul>
<li>它貌似没带来什么价值。</li>
<li>需要额外在 k8s 的 auth/access control 外再加一层 tiller 的 auth/access control, 负担大。</li>
<li>模板工具其实可以用 <code>k apply --dry-run</code> 来做类似的事情</li>
<li>Kubernetes Secrets 的管理没有变的更简单。</li>
<li>Helm 无法做  Infrastructure 级别的组件管理，例如 kibe-dns, cni provider, cluster autoscaler.</li>
<li>Helm state 存在 ConfigMap 里面，有 1MB 的限制 …</li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/f4e8cece-9d04-4e0b-acf8-3c9e77250f96.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/11f5fb91-6b28-42d3-b430-f179acef8542.html" rel="bookmark"
                                title="Permalink to Microservice Architecture at Medium"
                                >Microservice Architecture at Medium</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://medium.engineering/microservice-architecture-at-medium-9c33805eb74f">查看原文</a></p>
<p>本文介绍了 Medium 的 Microservices 架构。Medium 跟进的比较晚，在不伤害开发的生产力的前提下，他们总结出了几点策略：</p>
<ul>
<li>新服务需要有价值，要么是产品上的，要么是工程上的。</li>
<li>服务之间不要共享存储。具体来说，可以抽象一个服务专门处理一类数据，或者 grpc/http pubsub, 或者用 ETL 管线同步数据。
  <img alt="" src="https://cdn-images-1.medium.com/max/2000/1*PRdrp_MZ3C2KwKHRr83XbA.png"></li>
<li>区分 building a service &amp; running a service。</li>
<li>服务需要很容易被观测</li>
<li>不是每个服务都需要从头撸</li>
<li>仔细处理服务失效</li>
<li>防止 microservice syndromes 粗线：用 微服务会引入更多问题。例如需要仔细建模，衡量引入的语言和技术栈，服务耦合，observability，倾向于开发新服务而不是修bug。</li>
</ul>
<p>Medium 目前的技术栈是：一个大 Node 应用为主，一些小服务为辅 …</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/11f5fb91-6b28-42d3-b430-f179acef8542.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/433ca577-e597-4700-89e2-8d466d64f7cf.html" rel="bookmark"
                                title="Permalink to What is the SSL Certificate Subject Alternative Name"
                                >What is the SSL Certificate Subject Alternative Name</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://support.dnsimple.com/articles/what-is-ssl-san/">查看原文</a></p>
<p>SSL SAN 是一个 SSL 证书的扩展，允许在证书里面声明额外的域名。</p>
<p>一般的证书只能适配一个域名，例如 一个 enqueuezero.com 的证书是不可以用在 donate.enqueuezero.com 网站上的（Technically，你可以，但是浏览器会标记网站不安全，可能会被窃听）。</p>
<p>SAN 可以让你在给 enqueuezero.com 签发的证书里面再塞入一个 Subject Alternative Name，例如 *.enqueuezero.com。这样这个证书可以同时使用在 enqueuezero.com, donate.enqueuezero.com 上。</p>
<p>衍生思考：为什么要有这么个东西? 估计是最开始设计证书这一套的人没有想到大家会有这样的需求吧。。。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/433ca577-e597-4700-89e2-8d466d64f7cf.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/add18dc5-ee9d-4a4f-8a79-b8fbd3f4b948.html" rel="bookmark"
                                title="Permalink to GitHub October 21 事故分析"
                                >GitHub October 21 事故分析</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://blog.github.com/2018-10-30-oct21-post-incident-analysis/">查看原文</a></p>
<p>本文总结了为什么 GitHub 挂了一天多。</p>
<p>简单来说，有那么 43 秒的时间，东海岸的网络hub跟机房网络不通，导致 MySQL Raft Orchestrator 把 master 从东海岸切到了西海岸。就是一次脑裂，东西两边都有数据写进了数据库。工程师们决定保障数据一致性，所以就给服务降级，再慢慢迁移数据。</p>
<p>思考：</p>
<ul>
<li>应急响应的博客服务怎么可以用自家服务呢，还是尽量用第三方服务/或者完全在别的地方托管比较好。</li>
<li>是否可以增加一份预算，当备份传输太慢的时候，直接让工程师带上硬盘，用几小时直飞到另外一个机房去作为 Plan B?</li>
<li>公有云的 blob 服务是否合适用于备份 TB 级别的数据？解压出来进新的 MysQL 服务器也需要很久时间。最能治本的方案可以在 Raft 集群外再做一个热备的 master，也即是文末提到的 multiple data centers in an active …</li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/add18dc5-ee9d-4a4f-8a79-b8fbd3f4b948.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/ddbc65b9-9202-4c87-a68a-cd8bd40929e2.html" rel="bookmark"
                                title="Permalink to AWK FAQ"
                                >AWK FAQ</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="http://www.faqs.org/faqs/computer-lang/awk/faq/">查看原文</a></p>
<p>本文整理了关于 AWK 的书籍和资源。目前有十多种 awk 的实现，其中 gawk 用的比较多。不用 perl 而用 awk 的原因是 awk 很可能已经预装在各种系统里面马上就能用。</p>
<blockquote>
<p>clear perl code is better than unclear awk code; but NOTHING comes close to unclear perl code</p>
</blockquote>
<p>在 awk 中使用环境变量比较简单的办法：<code>awk -v name="$USER" '{print name}'</code> 或者 <code>awk '{print ENVIRON["USER"]}'</code></p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/ddbc65b9-9202-4c87-a68a-cd8bd40929e2.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/f3c7a6dd-8789-4cb3-b8d2-f8aca870087e.html" rel="bookmark"
                                title="Permalink to How I organize my knowledge as a Software Engineer"
                                >How I organize my knowledge as a Software Engineer</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://dev.to/brpaz/how-do-i-organize-my-knowledge-as-a-software-engineer-4387">查看原文</a></p>
<p>本文介绍了一些学习相关的应用。</p>
<ul>
<li>Notion 可以做笔记整理</li>
<li>Pocket 用来做阅读清单</li>
<li>SnippetStore 代码管理</li>
<li>Devhints 查小抄</li>
</ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/f3c7a6dd-8789-4cb3-b8d2-f8aca870087e.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/06cc1edc-9709-4d19-996f-a94c94f09811.html" rel="bookmark"
                                title="Permalink to Dropbox Traffic Infrastructure Edge Network"
                                >Dropbox Traffic Infrastructure Edge Network</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://blogs.dropbox.com/tech/2018/10/dropbox-traffic-infrastructure-edge-network/">查看原文</a></p>
<p>本文介绍了 Dropbox 的 Edge 网络层的设计，涉及 GSLB，RUM DNS，L4 负载均衡，Nginx 配置，以及一些 gRPC 代理。</p>
<ul>
<li>Dropbox 的数据量级不小，注册用户数大约五亿: 这意味着网络流量和请求数量也非常大。</li>
<li>Edge 是 Dropbox 构建的 points of presence （PoP）。如下图，Edge 可以在离用户更近的地方处理连接，然后再连到服务器处理，虽然增加了一个 RTT，但是响应时间减半。
<img alt="" src="https://dropboxtechblog.files.wordpress.com/2018/10/02-03-screenshot2018-10-0422-29-22.png?w=650&amp;h=161"></li>
<li>PoP 的地点选取很讲究，有人为选定，也有算法辅助。</li>
<li>GSLB 是 Edge 负责负载均衡的算法。BGP anycast 是最简单的 BGP 负载均衡方法，但有时候性能不太好 …</li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/06cc1edc-9709-4d19-996f-a94c94f09811.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/2e9e1a08-7e46-47f3-9995-4d456af3ac5e.html" rel="bookmark"
                                title="Permalink to A Bitter Guide To Open Source"
                                >A Bitter Guide To Open Source</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://medium.com/codezillas/a-bitter-guide-to-open-source-a8e3b6a3c1c4">查看原文</a></p>
<p>本文是开源的入门贴。</p>
<ul>
<li>为什么开源：学习，成长，回馈社区，找工作可能加分，等等。</li>
<li>如何开始：遇到了问题，有一个解决办法，把解决办法用漂亮的 API 封装好让别人可以用。Just do it。</li>
<li>准备发布：写文档，写测试，写类型，准备 README，CONTRIBUTING，LICENSE，metadata</li>
<li>发布：掐好大家搭车或者饭点发出去。</li>
<li>维护：不管有没有人用，写了就要维护好，修修修 bug，做改进。不管嘲笑的人，做好自己的事情。小版本迭代改进。</li>
</ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/2e9e1a08-7e46-47f3-9995-4d456af3ac5e.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/d4e9ccf0-f4f8-40a6-abdf-e40ec224c5a6.html" rel="bookmark"
                                title="Permalink to SQLite Database Authorization and ACL"
                                >SQLite Database Authorization and ACL</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://charlesleifer.com/blog/sqlite-database-authorization-and-access-control-with-python/">查看原文</a></p>
<p>SQLite 数据库也可以使用简单的 ACL，方法是通过 sqlite 内建的 <code>authorizer</code>. SQLite 连接对象可以设置 authorizer 控制 sql 的操作是否可以通过: https://www.sqlite.org/c3ref/set_authorizer.html</p>
<p>简单来说，这个 authorizer 方法可以接受几个设定的参数，你自己需要写哪些操作可以通过，哪些不可以。例如：</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sqlite3</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;/tmp/auth-demo.db&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">authorizer</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">,</span> <span class="n">db_name</span><span class="p">,</span> <span class="n">trigger_name</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="n">SQLITE_DELETE</span> <span class="ow">and</span> <span class="n">arg1</span> <span class="o">==</span> <span class="s1">&#39;users&#39;</span><span class="p">:</span>
        <span class="k">return …</span></code></pre></div>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/d4e9ccf0-f4f8-40a6-abdf-e40ec224c5a6.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/40dba745-f975-49dd-b47a-bf72b7170660.html" rel="bookmark"
                                title="Permalink to Alternative code styles"
                                >Alternative code styles</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://swalladge.id.au/archives/2018/10/15/alternative-code-styles/">查看原文</a></p>
<p>本文介绍了一些奇怪的 code styles：C macros(C代码往脚本语言方向走)，代码居中，fib identation(可以避免写太多嵌套）, braces 放到最后把语言往 Python 缩进的样式走。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/40dba745-f975-49dd-b47a-bf72b7170660.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>

<p class="paginator">
        <a href="https://www.soasme.com/techshack.weekly/category/verses3.html">&laquo;</a>
    Page 4 / 54
        <a href="https://www.soasme.com/techshack.weekly/category/verses5.html">&raquo;</a>
</p>
            </section><!-- /#content -->

                </div>

                <hr>
                <div id="footer" class="col-lg-12">
                    <nav>
                        <ul>
                        </ul>
                    </nav>
                </div>
            </div>
            <div id="sidebar" class="col-lg-4">
                <h1>
                    <a href="https://www.soasme.com/techshack.weekly " title="Techshack Weekly">
                        <img src="https://www.soasme.com/techshack.weekly/images/logo-200x50.png" />
                    </a>
                </h1>
                <span class="description"> </span>
                <div><div class="entry-subscription">
    <h5>Techshack Weekly</h5>
    <br>
    专注于后端技术阅读
    <br>
    目前有上百位订阅者。
    <br>
    订阅 <a href="https://www.soasme.com/techshack.weekly/feeds/issues.atom.xml">RSS</a>
    <br>
    欢迎加入 <a href="https://t.me/techshack">Telegram Channel</a> ，
    <br>
    <iframe src="https://tgwidget.com/widget/count/?id=5a66b26483ba88e7118b4568" frameborder="0" scrolling="no" horizontalscrolling="no" verticalscrolling="no" width="160px" height="50px" async></iframe>
    <br>
    关注推特 <a href="https://twitter.com/techshackweekly">@techshackweekly</a>。
    <br>
    <a href="https://twitter.com/TechshackWeekly?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow @TechshackWeekly</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <hr>
</div></div>
                <div><!-- Begin MailChimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
    #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif;  width:250px;}
    /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
       We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://soasme.us17.list-manage.com/subscribe/post?u=617c1cb80ba1b0cbf828df387&amp;id=10442a8ee6" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
    <label for="mce-EMAIL">Subscribe to our mailing list</label>
    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_617c1cb80ba1b0cbf828df387_10442a8ee6" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup--></div>
                    <div>:: <a href="https://www.soasme.com/techshack.weekly/categories.html">Categories</a></div>
                <!-- <span class="feed"><a href="">RSS</a> | <a href="">Atom</a></span> -->
            </div>
            <div class="col-lg-2"></div>
        </div>
    </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-36183732-2");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>