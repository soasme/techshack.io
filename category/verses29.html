<!DOCTYPE html>
<html lang="en">
<head>
    <title>Techshack Weekly </title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://www.soasme.com/techshack.weekly/theme/css/main.css" type="text/css" />
        <link href="https://www.soasme.com/techshack.weekly/" type="application/atom+xml" rel="alternate" title="Techshack Weekly ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie.css"/>
                <script src="https://www.soasme.com/techshack.weekly/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie6.css"/><![endif]-->

</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-2"></div>
            <div id="content" class="col-lg-6">
                <div class="entry">
        
        

 
                <section id="content" class="body">
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/cd0026c3-08b1-4274-a672-a2ff8aa2c9d9.html" rel="bookmark"
                                title="Permalink to EPEL 简介"
                                >EPEL 简介</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://fedoraproject.org/wiki/EPEL">查看原文</a></p>
<p>EPEL 全名是 Extra Packages for Enterprise Linux。它允许我们在企业级操作系统上安装一些附加的包。例如在 CentOS 6 上想要安装 python2.7，出于系统稳定的原因，直接 <code>yum install python</code> 只能升级到 2.6。而有了 epel 后，我们可以安装上 2.7 但又不破坏系统原来的包。具体使用很简单，只要运行 <code>yum install epel-release</code> 即可。原理： epel-release.rpm 对于 centos 就是一个 yum repo 的配置。安装包就是添加一个 yum 仓库。不同版本的操作系统会有相对应的 EPEL …</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/cd0026c3-08b1-4274-a672-a2ff8aa2c9d9.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/d011f1ed-dac6-43a4-b3ec-d5b412ba8424.html" rel="bookmark"
                                title="Permalink to Pymotw - enum"
                                >Pymotw - enum</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://pymotw.com/3/enum/index.html">查看原文</a></p>
<p>Python 库 <code>enum</code> 引入于 3.4，出自 PEP435, 使用它可以让我们简化很多按组归类的常量。</p>
<ul>
<li>继承 <code>enum.Enum</code> 逐个定义名字 + 值。</li>
<li>可通过循环获得所有值。</li>
<li>当值有重复，可认为后续定义的名字是第一个定义的名字的 alias</li>
<li>可用 @enum.unique 确保定义中不会有重复值（有重复则报异常）</li>
<li>值比较默认支持 is, == 比较。大小比较的话可通过继承 <code>enum.IntEnum</code> 类。</li>
<li>可通过 <code>enum.Enum(value='MyValinnaEnum', names='a b c')</code> 这种方法自动生成值从 1 开始的常量。</li>
<li><code>names</code> 也支持其它值，例如 tuple。</li>
</ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/d011f1ed-dac6-43a4-b3ec-d5b412ba8424.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/f151a36d-d0e6-4093-8bb7-802382c90080.html" rel="bookmark"
                                title="Permalink to Core API - 一种定义 Schema&Response 的格式"
                                >Core API - 一种定义 Schema&Response 的格式</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="http://www.coreapi.org/">查看原文</a></p>
<p>Core API 是一种展示 Web API 的文档对象模型 (Document Object Model)。 Core API 提供了客户端可以让你更简单地发起请求和解析相应。简单来说，它给 RESTful API 套上了一层更接近 function call 风格的接口。</p>
<ul>
<li>可以通过 <code>pip install coreapi</code> 获得命令行工具</li>
<li>示例：<ul>
<li><code>coreapi action notes 0 delete</code> 删除 id=0 的笔记</li>
<li><code>coreapi action add_note --params description="Email venue about conference dates"</code> 添加一个笔记</li>
<li><code>coreapi action notes …</code></li></ul></li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/f151a36d-d0e6-4093-8bb7-802382c90080.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/49a934c9-bd8d-4466-a824-2dda4ca0a67b.html" rel="bookmark"
                                title="Permalink to Tesla Attack 警钟 - 安全访问 Kubernetes dashboard"
                                >Tesla Attack 警钟 - 安全访问 Kubernetes dashboard</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://blog.heptio.com/on-securing-the-kubernetes-dashboard-16b09b1b7aca">查看原文</a></p>
<p>Tesla 被爆出巨大的安全隐患：其 Kubernetes Dashboard 暴露在公网上，AWS Key &amp; Token 都可以被人看到。这篇文章讲述了如何给 Kubernetes Dashboard 配置密码，配置域名，配置 HTTPS。</p>
<ul>
<li>裸跑 dashboard 是很危险的。整个集群的机器都可以被操控，信息可以被窃取。</li>
<li>你必须在生产环境上打开 RBAC，这样集群节点间的通信才能被加密。一些工具启动集群后默认是没有打开它的，需要注意确认。</li>
<li>最简单访问 dashboard 的方式是运行：<code>kubectl proxy</code>, 它启动一个类似 dev webserver 一样的东西。</li>
<li>错误的做法：直接给 Dashboard root 权限（虽然基于 ServiceAccount 的授权不会抱错 PermissionError，但是敲级危险的！</li>
<li>推荐的做法：per-user credentials …</li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/49a934c9-bd8d-4466-a824-2dda4ca0a67b.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/569ccd29-6d92-49a1-af0d-c15fa7567119.html" rel="bookmark"
                                title="Permalink to 编程语言简史"
                                >编程语言简史</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://medium.com/@caspervonb/a-brief-totally-accurate-history-of-programming-languages-cd93ec806124">查看原文</a></p>
<p>这篇文章戏谑地介绍了很多编程语言的历史，从上古的读卡器，到中古的C，再到更近现代的 Python Ruby 等等。</p>
<ul>
<li>语言的发明人一般都是对现状感受到了不开心，不满意。</li>
<li>有些发明人嵌入了自己独特的世界观，例如 Lua 的发明人想要 index 从 1 开始。</li>
<li>很多人对 C 都很不满，发明出了各种奇怪的变体：Objective-C, Go, Rust, C#, Java ...</li>
</ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/569ccd29-6d92-49a1-af0d-c15fa7567119.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/b0ccb654-20c7-466a-964b-85cbc545e27e.html" rel="bookmark"
                                title="Permalink to 10 种软件架构模式简明教程"
                                >10 种软件架构模式简明教程</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://towardsdatascience.com/10-common-software-architectural-patterns-in-a-nutshell-a0b47a1e9013">查看原文</a></p>
<p>本文介绍了 10 种软件架构的模式（尽管有一些是拉上来凑数的）。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/b0ccb654-20c7-466a-964b-85cbc545e27e.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/b1221638-0e19-4221-bfb6-9aa25adb1f00.html" rel="bookmark"
                                title="Permalink to 小团队的 Runbook 实践"
                                >小团队的 Runbook 实践</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://blog.buildo.io/enable-your-devs-to-do-ops-9a0a870baa1">查看原文</a></p>
<p>这篇文章讲述了这个小团队如何让两三个人做 OnCall，但其实讲述的是 Runbook 的一些实践。</p>
<ul>
<li>Runbook 是用来给 24x7 团队在非工作时间不用召唤开发的情况下可以自己根据文档运行一些基本故障的对应解决方案。</li>
<li>原则：如果命令未来可能会被再次执行，那就花点时间写点文档，写清楚执行的步骤。</li>
<li>Runbook 尽可能按照一个模板来写，有一些基本的信息，比如有哪些环境，怎么找日志，怎么做 troubleshooting。</li>
<li>代码库里面嵌入一些 scripts, 方便执行。</li>
<li>如果 Runbook 来不及更新，好歹留一条评论在那里。</li>
<li>Runbook 有个 owner，出问题好抓人。</li>
</ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/b1221638-0e19-4221-bfb6-9aa25adb1f00.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/9a2d5e5e-a8ee-492a-9321-dc38ea37b0cf.html" rel="bookmark"
                                title="Permalink to 如何做到数据库迁移 zero downtime"
                                >如何做到数据库迁移 zero downtime</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://samsaffron.com/archive/2018/03/22/managing-db-schema-changes-without-downtime">查看原文</a></p>
<p>这篇文章是 Discourse 的工程师讲他们如何做自动化部署，同时保证数据库表结构的迁移不会引起故障。他们的部署是全自动的。测试通过，自动部署到 meta.discourse.com。这套流程需要考虑的大问题就是数据库结构怎么做兼容。如果代码变更前后有不兼容的数据库表结构变更，势必引起重启应用后大型崩溃。</p>
<ul>
<li>首先，他们最终 migration 的各种信息，不只是 ActiveRecord 提供的那些功能，还得要有诸如以下之类的信息：<ul>
<li>migration 什么时候跑的</li>
<li>migration 在哪台机器上跑的</li>
<li>migration 跑了多长时间</li>
<li>git / rails version</li>
</ul>
</li>
<li>其次，drop table 延迟执行；改字段 =&gt; 新建字段复制老字段的值，稍晚一些时候将老字段变为 readonly</li>
<li>不信任自己：代码层面阻拦诸如 <code>DROP TABLE</code> 之类的代码</li>
<li>建议：改造部署流程，提供 pre-deploy &amp; post-deploy 的 …</li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/9a2d5e5e-a8ee-492a-9321-dc38ea37b0cf.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/b495304b-8e40-44e2-9624-0a457f2cdda2.html" rel="bookmark"
                                title="Permalink to Python 库 - black"
                                >Python 库 - black</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://github.com/ambv/black">查看原文</a></p>
<p>Black 是新建推出的一款关注度比较高的 Python 代码格式化工具。它的特点如下：</p>
<ul>
<li>原地修改</li>
<li>不用配置</li>
<li>不考虑你原先是怎么格式化代码的</li>
<li>在 <code># fmt: off</code> 和 <code># fmt: on</code> 之间的代码不格式化</li>
<li>函数参数太多会尝试一行一个参数，这样增减参数产生的 diff 比较小</li>
<li>在 return, raise, break, continue, yield 之后会增加空行，可读性比较高。</li>
<li>行宽 88 字符，比常见的 80 多 10%，因为文件会能更短一些。</li>
</ul>
<p>简而言之，它会自动作出让 pycodestyle 满意的代码风格。用法很简单，就是只能用 Python 3，不过它可以用于格式化 Python 2 &amp; 3 的代码。</p>
<div class="highlight"><pre><span></span><code>$ black …</code></pre></div>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/b495304b-8e40-44e2-9624-0a457f2cdda2.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/2be6dfff-0483-48d9-9755-e4b6389bdf18.html" rel="bookmark"
                                title="Permalink to 文档阅读 - Kubernetes Secret"
                                >文档阅读 - Kubernetes Secret</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://kubernetes.io/docs/concepts/configuration/secret/">查看原文</a></p>
<p>Kubernetes Secret 是用来存放一些敏感配置，诸如密码， token等信息。如果不用 secret，而只是写到明文的文本中毕竟不太安全。</p>
<ul>
<li>使用的方法可以是写 <code>Kind: Secret</code> 的 yaml 文件，其中定义了 metadata.name 指定该 secret 叫什么,  data 部分定义了 key, value。其中 value 使用 base64 编码存储。直接使用 <code>kubectl create -f ./your-secret.yml</code> 新建 secret.</li>
<li>也可以直接使用 <code>kubectl create secret generic your-secret --from-file=xxx.txt</code> 存储文件。</li>
<li>使用 <code>kubectl …</code></li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/2be6dfff-0483-48d9-9755-e4b6389bdf18.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>

<p class="paginator">
        <a href="https://www.soasme.com/techshack.weekly/category/verses28.html">&laquo;</a>
    Page 29 / 54
        <a href="https://www.soasme.com/techshack.weekly/category/verses30.html">&raquo;</a>
</p>
            </section><!-- /#content -->

                </div>

                <hr>
                <div id="footer" class="col-lg-12">
                    <nav>
                        <ul>
                        </ul>
                    </nav>
                </div>
            </div>
            <div id="sidebar" class="col-lg-4">
                <h1>
                    <a href="https://www.soasme.com/techshack.weekly " title="Techshack Weekly">
                        <img src="https://www.soasme.com/techshack.weekly/images/logo-200x50.png" />
                    </a>
                </h1>
                <span class="description"> </span>
                <div><div class="entry-subscription">
    <h5>Techshack Weekly</h5>
    <br>
    专注于后端技术阅读
    <br>
    目前有上百位订阅者。
    <br>
    订阅 <a href="https://www.soasme.com/techshack.weekly/feeds/issues.atom.xml">RSS</a>
    <br>
    欢迎加入 <a href="https://t.me/techshack">Telegram Channel</a> ，
    <br>
    <iframe src="https://tgwidget.com/widget/count/?id=5a66b26483ba88e7118b4568" frameborder="0" scrolling="no" horizontalscrolling="no" verticalscrolling="no" width="160px" height="50px" async></iframe>
    <br>
    关注推特 <a href="https://twitter.com/techshackweekly">@techshackweekly</a>。
    <br>
    <a href="https://twitter.com/TechshackWeekly?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow @TechshackWeekly</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <hr>
</div></div>
                <div><!-- Begin MailChimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
    #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif;  width:250px;}
    /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
       We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://soasme.us17.list-manage.com/subscribe/post?u=617c1cb80ba1b0cbf828df387&amp;id=10442a8ee6" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
    <label for="mce-EMAIL">Subscribe to our mailing list</label>
    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_617c1cb80ba1b0cbf828df387_10442a8ee6" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup--></div>
                    <div>:: <a href="https://www.soasme.com/techshack.weekly/categories.html">Categories</a></div>
                <!-- <span class="feed"><a href="">RSS</a> | <a href="">Atom</a></span> -->
            </div>
            <div class="col-lg-2"></div>
        </div>
    </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-36183732-2");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>