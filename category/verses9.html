<!DOCTYPE html>
<html lang="en">
<head>
    <title>Techshack Weekly </title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://www.soasme.com/techshack.weekly/theme/css/main.css" type="text/css" />
        <link href="https://www.soasme.com/techshack.weekly/" type="application/atom+xml" rel="alternate" title="Techshack Weekly ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie.css"/>
                <script src="https://www.soasme.com/techshack.weekly/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie6.css"/><![endif]-->

</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-2"></div>
            <div id="content" class="col-lg-6">
                <div class="entry">
        
        

 
                <section id="content" class="body">
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/c89868b5-c367-4acf-b4c3-5b2c911f3347.html" rel="bookmark"
                                title="Permalink to Removing jQuery from GitHub.com frontend"
                                >Removing jQuery from GitHub.com frontend</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://githubengineering.com/removing-jquery-from-github-frontend/">查看原文</a></p>
<p>本文介绍了 GitHub 如何将 jQuery 的依赖一点一点去掉。</p>
<ul>
<li>以前：jQuery 在 2007 年的时候几乎是标配，就算不主动用，很多库也依赖它。</li>
<li>近些年: jQuery 的特性很多都融进了现代 JS 语言和浏览器中。</li>
<li>取代的原因是 jQuery 的写法不太能传达出代码的原始意图，也很容易默默吞掉错误。</li>
<li>取代品：直接用 JS：https://developer.mozilla.org/en-US/docs/Web/JavaScript</li>
<li>如何取代：<ul>
<li>仓库埋 metric 进去，可以查看 jQuery usage</li>
<li>lint 把有诸如 <code>$.ajax</code> 之类的新代码直接标为构建失败</li>
<li>有依赖库的，保持接口稳定的同时，替换掉实现，使用 JS 原生的特性 …</li></ul></li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/c89868b5-c367-4acf-b4c3-5b2c911f3347.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/b98bdb44-cc8c-4147-ae26-eb9f53d6f5a6.html" rel="bookmark"
                                title="Permalink to Py-Spy - A sampling profiler for Python programs"
                                >Py-Spy - A sampling profiler for Python programs</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://github.com/benfred/py-spy">查看原文</a></p>
<p>Py-Spy 这个工具是个 Python Profiler，它可以在不重启 Python 程序的前提下得到耗时函数及其调用时间，并将其以 top-like 的形式展示出来。</p>
<p>它的特色是：低 overhead，用 Rust 写的核心部分，不需要侵入 Python 进程。无侵入这个特性也是它有别于标准库甚至其他 profiler 的好特性。你不需要修改任何一行项目代码就能用它。pyflame 倒是可以，不过尚不支持 Python 3.7 及非 Linux 的 OS。</p>
<p>工作原理：通过读取进程内存：</p>
<ul>
<li>linux: <a href="http://man7.org/linux/man-pages/man2/process_vm_readv.2.html">process_vm_readv</a></li>
<li>osx: <a href="https://developer.apple.com/documentation/kernel/1585350-vm_read?language=objc">vm_read</a></li>
<li>windows: <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms680553.aspx">ReadProcessMemory</a></li>
</ul>
<p>在内存中，全局变量 PyInterpreterState 可以拿到解释器运行着的所有线程，再遍历每个线程拿到 PyFrameObject 中的调用栈。</p>
<p><img alt="" src="https://github.com/benfred/py-spy/blob/master/images/console_viewer.gif"></p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/b98bdb44-cc8c-4147-ae26-eb9f53d6f5a6.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/c62b3211-d5a3-4240-9147-6e5528373161.html" rel="bookmark"
                                title="Permalink to Typescript at Google"
                                >Typescript at Google</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="http://neugierig.org/software/blog/2018/09/typescript-at-google.html">查看原文</a></p>
<p>本文介绍了 Typescript 逐渐在 Google 产品线被使用的现状。Google 在 JS 很早期的时候就在探索如何编写大型前端程序，并归纳出 Closure 这个框架。时过境迁，这套框架可能目前也就 Google 在用，或者某些用了的公司还需要找 ex-googler 来维护。Closure 本质是一个静态类型的 JS 方言，问题主要在于常年使用估计埋了不少臭虫进去。现代 JS 产出了 UMD, AMD, CommonJS，ES6 甚至也有自己的模块系统，npm，webpack 也逐渐推广开。作者所在的组就在尝试将这些东西引入现有代码仓库。迁移也是慢慢地迁移，而不是从头写一遍。现在好些个 Google Products 都已经有慢慢用上了 TypeScript 了。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/c62b3211-d5a3-4240-9147-6e5528373161.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/1aff11c8-2707-4a44-b81b-b9ba61d78682.html" rel="bookmark"
                                title="Permalink to Pandas Overview"
                                >Pandas Overview</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="http://pandas.pydata.org/pandas-docs/stable/overview.html">查看原文</a></p>
<p>Pandas 是一个数据结构的操作库，核心数据结构是 DataFrame，DataFrame 是 Series 的容器，Series 是 scalar 的容器。你可以用 dictionary-like 的语法来操作数据。这类数据主要用来处理多维数据，例如时间序列数据什么的。</p>
<p>处理数据的时候，比较推荐 immutable，即保留原始数据不变生成新数据，尽管 Pandas  的所有数据结构都是 value-mutable 的。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/1aff11c8-2707-4a44-b81b-b9ba61d78682.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/9edb78fc-a1fe-4812-a55d-5ba3c6632fa2.html" rel="bookmark"
                                title="Permalink to Airbnb 架构概览"
                                >Airbnb 架构概览</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://enqueuezero.com/airbnb-architecture.html">查看原文</a></p>
<p>本文介绍了 Airbnb 的架构，我们可以看到 Airbnb 是 AWS 的重度用户，使用了 EC2, RDS, S3, CloudWatch, EMR(已废弃，目前用的是 Hive+Airflow 的解决方案)。负载均衡使用 Charon。服务发现用 SmarkStack - 可以监听 ZooKeeper 的数据，自动更新到 HAProxy。后端的前台用 Rails，后台服务用 Java 系的框架 Dropwizard。服务治理将用户请求上下文塞入 RPC 请求中，监控服务的 p95_latency, p99_latency。</p>
<p>可以看到 Airbnb 的架构是从最简单的 Rails MVC 一点一点添砖加瓦搞出来的。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/9edb78fc-a1fe-4812-a55d-5ba3c6632fa2.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/a700e303-4297-4042-9941-2545232b41cd.html" rel="bookmark"
                                title="Permalink to Pandas 10 分钟入门"
                                >Pandas 10 分钟入门</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="http://pandas.pydata.org/pandas-docs/stable/10min.html">查看原文</a></p>
<p>本文是 pandas 的 10min 入门帖子。</p>
<ul>
<li>新建 Series 对象：<code>pd.Series(given_list)</code>, 如果值为空，用 <code>np.nan</code>。</li>
<li>新建 DataFrame 对象：<code>pd.DataFrame(given_numpy_array, index=index, columns=given_list)</code>。稍微复杂一些，第一个参数是 numpy 矩阵，index 是 pandas Index 实例，columns 是列的名字。</li>
<li>dict 新建 DataFrame 对象：<code>pd.DataFrame({"a": 1., "B": pd_series, ...})</code></li>
<li>查看每一列的类型：<code>df.dtypes …</code></li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/a700e303-4297-4042-9941-2545232b41cd.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/fb93912a-7715-4d82-95b4-e56e61f3b83a.html" rel="bookmark"
                                title="Permalink to How the Go runtime implements maps efficiently"
                                >How the Go runtime implements maps efficiently</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://dave.cheney.net/2018/05/29/how-the-go-runtime-implements-maps-efficiently-without-generics">查看原文</a></p>
<p>本文介绍了 Go 语言如何实现 Map 的泛型，并对比了 C++ STL 和 Java 的实现。</p>
<ul>
<li>HashMap: 一种查询时间复杂度近乎 O(1), 最差为 O(N) 的数据结构，需提供 hash function。O(N) 估计也真是运气背到家了，所有 Key 都哈希碰撞。<ul>
<li>hash function 一定是一个产出固定长度数据的函数</li>
</ul>
</li>
<li>C++ STL <code>std::unordered_map</code> 在编译时就把类型模板编好了，所以编译时就知道每个 map 的 key 类型。</li>
<li>Java <code>java.util.Hashmap</code> 要对原子类型做 boxing。由于所有 java …</li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/fb93912a-7715-4d82-95b4-e56e61f3b83a.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/477cfe9c-c9ec-4c6d-a9fe-9b1453cef798.html" rel="bookmark"
                                title="Permalink to Latency Heat Maps"
                                >Latency Heat Maps</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="http://www.brendangregg.com/HeatMaps/latency.html">查看原文</a></p>
<p>响应时间（response time），也叫延迟（latency），这个指标有很多模式隐藏其中。这篇文章通过 disk I/O latency 介绍了 latency heat map 这种查看性能问题的图表。</p>
<p><code>iostat -xz 1</code> 可以查看 Linux 的平均 latency，我们可以定时采样，画出柱状图（histogram），x 轴是时间，y 轴是 N ms 的 latency。
柱状图可能会由于采样频率不同导致给出不一致的结论，解决办法是使用多种采样频率。如果不改进，那你要看好几张柱状图才能得到结论，有了 heatmap 你就可以把使用不同频率采样得到的结果压在一幅图里面。</p>
<p>heatmap 本质上是一张三维图表，x y 轴表示两个维度（一般其中一个是时间，另外一个是采样频率），颜色深浅表示第三个维度 …</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/477cfe9c-c9ec-4c6d-a9fe-9b1453cef798.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/f80b32b8-e451-43b4-ac35-dfe822ddb1af.html" rel="bookmark"
                                title="Permalink to Stop future proofing software"
                                >Stop future proofing software</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://medium.com/@george3d6/stop-future-proofing-software-c984cbd65e78">查看原文</a></p>
<p>本文的论点是：诸如 <code>我们需要X，尽管Y目前更好，但一旦未来有Z这个需求，X 会让开发更简单</code> 这样的观点是不一定是对的。</p>
<p>那么我们怎么做技术选型呢？作者认为：Less is more。少想未来会怎样，把当下做到易于扩展即可。当下不一定要完美，但能帮你很快适应未来的架构。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/f80b32b8-e451-43b4-ac35-dfe822ddb1af.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/efcff137-1590-4b0a-a8d1-125ed4ff4620.html" rel="bookmark"
                                title="Permalink to Netflix 使用 Papermill 的实践"
                                >Netflix 使用 Papermill 的实践</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://medium.com/netflix-techblog/scheduling-notebooks-348e6c14cfd6">查看原文</a></p>
<p>本文介绍了 Netflix 如何使用 Papermill 管理 .ipynb.</p>
<p>Jupyter Notebook 本质上就是一个 JSON 文档，并自带了简易的接口可以运行它自己。它真正运行的地方是 jupyter-kernels。ipynb 的缺点是常常变化，cell output 跟代码不完全一一对应，不好测试，没有可以配置运行上下文的设施，以及你需要运行一个 Notebook server。</p>
<p>Papermill 的出现改进了很多这些问题。Papermill 做的事情是: 接受一个 ipynb path 和一些参数，然后运行出来一个 output ipynb，所有东西都在这个 output ipynb 里面。伪代码如下：</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">papermill</span> <span class="kn">as</span> <span class="nn">pm</span>

<span class="n">pm</span><span class="o">.</span><span class="n">execute_notebook</span><span class="p">(</span>
   <span class="s1">&#39;path/to/input …</span></code></pre></div>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/efcff137-1590-4b0a-a8d1-125ed4ff4620.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>

<p class="paginator">
        <a href="https://www.soasme.com/techshack.weekly/category/verses8.html">&laquo;</a>
    Page 9 / 54
        <a href="https://www.soasme.com/techshack.weekly/category/verses10.html">&raquo;</a>
</p>
            </section><!-- /#content -->

                </div>

                <hr>
                <div id="footer" class="col-lg-12">
                    <nav>
                        <ul>
                        </ul>
                    </nav>
                </div>
            </div>
            <div id="sidebar" class="col-lg-4">
                <h1>
                    <a href="https://www.soasme.com/techshack.weekly " title="Techshack Weekly">
                        <img src="https://www.soasme.com/techshack.weekly/images/logo-200x50.png" />
                    </a>
                </h1>
                <span class="description"> </span>
                <div><div class="entry-subscription">
    <h5>Techshack Weekly</h5>
    <br>
    专注于后端技术阅读
    <br>
    目前有上百位订阅者。
    <br>
    订阅 <a href="https://www.soasme.com/techshack.weekly/feeds/issues.atom.xml">RSS</a>
    <br>
    欢迎加入 <a href="https://t.me/techshack">Telegram Channel</a> ，
    <br>
    <iframe src="https://tgwidget.com/widget/count/?id=5a66b26483ba88e7118b4568" frameborder="0" scrolling="no" horizontalscrolling="no" verticalscrolling="no" width="160px" height="50px" async></iframe>
    <br>
    关注推特 <a href="https://twitter.com/techshackweekly">@techshackweekly</a>。
    <br>
    <a href="https://twitter.com/TechshackWeekly?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow @TechshackWeekly</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <hr>
</div></div>
                <div><!-- Begin MailChimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
    #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif;  width:250px;}
    /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
       We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://soasme.us17.list-manage.com/subscribe/post?u=617c1cb80ba1b0cbf828df387&amp;id=10442a8ee6" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
    <label for="mce-EMAIL">Subscribe to our mailing list</label>
    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_617c1cb80ba1b0cbf828df387_10442a8ee6" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup--></div>
                    <div>:: <a href="https://www.soasme.com/techshack.weekly/categories.html">Categories</a></div>
                <!-- <span class="feed"><a href="">RSS</a> | <a href="">Atom</a></span> -->
            </div>
            <div class="col-lg-2"></div>
        </div>
    </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-36183732-2");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>