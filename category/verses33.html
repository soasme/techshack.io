<!DOCTYPE html>
<html lang="en">
<head>
    <title>Techshack Weekly </title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://www.soasme.com/techshack.weekly/theme/css/main.css" type="text/css" />
        <link href="https://www.soasme.com/techshack.weekly/" type="application/atom+xml" rel="alternate" title="Techshack Weekly ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie.css"/>
                <script src="https://www.soasme.com/techshack.weekly/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie6.css"/><![endif]-->

</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-2"></div>
            <div id="content" class="col-lg-6">
                <div class="entry">
        
        

 
                <section id="content" class="body">
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/67b26725-2db2-4d86-956b-d7a2901fca96.html" rel="bookmark"
                                title="Permalink to Minikube - 一款搭建本地 Kubernetes 环境的工具"
                                >Minikube - 一款搭建本地 Kubernetes 环境的工具</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://github.com/kubernetes/minikube">查看原文</a></p>
<p>Minikube 可以在单机一键搭建整个 Kubernetes 环境，相当方便。</p>
<ul>
<li><code>brew cask install minikube</code></li>
<li><code>minikube start</code></li>
<li><code>minikube stop</code></li>
</ul>
<p>在 start / stop 中间可以用 kubectl 自由的玩耍。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/67b26725-2db2-4d86-956b-d7a2901fca96.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/c430d780-e090-4740-b581-ace759266bf4.html" rel="bookmark"
                                title="Permalink to 使用 Travis CI 自动构建博客"
                                >使用 Travis CI 自动构建博客</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="http://blog.mathieu-leplatre.info/publish-your-pelican-blog-on-github-pages-via-travis-ci.html">查看原文</a></p>
<p>使用 Travis CI 可以自动在推送数据到 GitHub 仓库后构建整个静态网站。这个技巧对于自动化很有帮助。具体的做法是在 .travis.yml 中至少运行如下命令：</p>
<div class="highlight"><pre><span></span><code>git push -fq https://<span class="cp">${</span><span class="n">GH_TOKEN</span><span class="cp">}</span>@github.com/$(TRAVIS_REPO_SLUG).git gh-pages &gt; /dev/null
</code></pre></div>


<p>同时，要么在 <code>.travis.yml</code> 中，要么在 Travis CI 网站 Settings 里面，配置 GH_TOKEN，记得将其设为 encrypted.</p>
<p>这样每当 master 有代码推送，Travis CI 就能自动构建，并将构建好的东西推回 gh-pages 分支，进而触发 GitHub …</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/c430d780-e090-4740-b581-ace759266bf4.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/e8c662e6-fdb1-4128-835c-8d17bdf6c86c.html" rel="bookmark"
                                title="Permalink to Miniast - 一款操作 Python AST 的工具"
                                >Miniast - 一款操作 Python AST 的工具</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://github.com/cpcloud/miniast">查看原文</a></p>
<p><code>miniast</code> 是一款可以生成 Python AST 的库。在它提供的示例中，可以看到一个等价的 Python 类被转化为被 miniast 提供的几个标记可以表示出来的 Python 代码。miniast 的实例可以用 miniast.sourcify 将其转为 Python 字符串。</p>
<p>衍生思考：这个类很大的意义在于安全地生成代码。由于缺失像 Lisp 的 Macro 一样的东西，一般在做 Python 元编程的时候，我们需要手动拼装 Python 字符串，再使用 eval 来执行。这里面存在被注入攻击的风险。使用像 miniast 这样的工具，可以降低被注入攻击的风险。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/e8c662e6-fdb1-4128-835c-8d17bdf6c86c.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/f0e27339-4d84-4355-a48b-e2205298a245.html" rel="bookmark"
                                title="Permalink to 为 Python Web Apps 写 Dockerfile"
                                >为 Python Web Apps 写 Dockerfile</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://blog.hasura.io/how-to-write-dockerfiles-for-python-web-apps-6d173842ae1d">查看原文</a></p>
<p>本文介绍了如何为 Python Apps 写 Dcokerfile，并应用这个文件构建适用于不同 Stage 的镜像。</p>
<ul>
<li>开发环境使用 debian 作为 base image, 生产环境使用 alpine 作为 base image</li>
<li>Gunicorn 在 dev 模式中开启 hot reloading</li>
<li>静态资源经过 bundle 以后，使用 flask static / template folders 提供</li>
<li>使用 multi-stage alpine build 减小最终部署到生产环境的镜像大小</li>
</ul>
<p>一些 Tricks：</p>
<ul>
<li>Dockerfile 中 <code>COPY src /app</code>, 运行的时候，在 dev mode …</li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/f0e27339-4d84-4355-a48b-e2205298a245.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/3fe26eb1-d16b-4e45-9832-cf8d6f36c26f.html" rel="bookmark"
                                title="Permalink to Steve Yegge on Kubernetes"
                                >Steve Yegge on Kubernetes</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://medium.com/@steve.yegge/honestly-i-cant-stand-k8s-48c9a600e405">查看原文</a></p>
<p>Steve Yegge 认为：Kubernetes 就是 Google 内部的 Borg 系统的简化版，但它也强迫你学习各种概念，相比 Amazon Fargate 或者 HashiCorp Nomad，k8s 的设计有点过度工程化。它还认为 container orchestration 的最优解决方案不一定会是 k8s。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/3fe26eb1-d16b-4e45-9832-cf8d6f36c26f.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/53b505ba-4479-4966-a0c6-bbdea8ee146a.html" rel="bookmark"
                                title="Permalink to Kubernetes / Docker 为我们隐藏掉的细节有哪些"
                                >Kubernetes / Docker 为我们隐藏掉的细节有哪些</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://www.hanselman.com/blog/WhyShouldICareAboutKubernetesDockerAndContainerOrchestration.aspx">查看原文</a></p>
<p>本文真正的 Title 是“我为什么要关心 Kubernetes, Docker 和容器编排？”。理由是它让我们 once for all 的做了以下这些事情：</p>
<ul>
<li>OS 版本，编程语言的版本及其依赖。</li>
<li>代码打包，代码的依赖，以及可能的补丁。</li>
<li>简单地运维，扩容（docker run / kubectl apply xyz.yml)</li>
<li>Dockerfile 声明了应用所需要的东西，K8S YAML 生命了端口，replica 数量，名字，环境变量等等。</li>
</ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/53b505ba-4479-4966-a0c6-bbdea8ee146a.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/84d3d497-35de-44c5-b8c6-1391c63cb6f4.html" rel="bookmark"
                                title="Permalink to StashAway 的基于 Kubernetes 的技术栈一览"
                                >StashAway 的基于 Kubernetes 的技术栈一览</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://medium.com/stashaway-engineering/running-a-modern-infrastructure-on-kubernetes-286ad6dab002">查看原文</a></p>
<p>本文介绍了 StashAway 这家公司如何使用 k8s 及其工具链搭生产环境。</p>
<ul>
<li>Service Discovery。由于节点创建和销毁很容易，每个容器配置的是动态 IP 地址，所以每个容器都需要被注册，这样其它容器才能访问到它。Kubernetes 提供的两种 SD 方法：环境变量 和 DNS-based。需要注意的是，一些 DNS 客户端会把 DNS cache TTL 调的很大，甚至默认永不过期。</li>
<li>Service Addressing。由于 DNS-based SD 只能让服务在 Kubernetes 集群内部访问，我们若有外部访问的需求，则可以使用 ExternalDNS annotations，当有新的 k8s 服务创建，它会自动注册一个子域名。</li>
<li>Routing。节点来来去去，会导致 Routing …</li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/84d3d497-35de-44c5-b8c6-1391c63cb6f4.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/bb18e402-4581-4879-93bc-42bb8f535ea1.html" rel="bookmark"
                                title="Permalink to Calico 简介"
                                >Calico 简介</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://www.projectcalico.org/learn/">查看原文</a></p>
<p>Calico 是构建数据中心网络的技术，它不使用 Overlay Network 技术，而采用 Pure Layer 3 的方式，可以做到更简单，更大容量，性能更好更高效。具体做法是用 BGP 做路由，用纯 IP 网络排线。它可以和 OpenStack &amp; Docker 这些编排系统无缝结合。他不需要在 Layer 2 的数据报文里面再额外封装东西(Packet encapsulation)。也不需要再做 NAT，隧道，VRF 表等等等等。</p>
<p>普通的 Overlay Network 要在实际的 payload 外面包上好些个信息，例如 Outer MAC, Outer IP, Outer UDP, VXLAN …</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/bb18e402-4581-4879-93bc-42bb8f535ea1.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/fad1048c-829c-4f4c-94b3-111e2711ebd0.html" rel="bookmark"
                                title="Permalink to Python Async 简明教程"
                                >Python Async 简明教程</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://www.aeracode.org/2018/02/19/python-async-simplified/">查看原文</a></p>
<p>本文给 Python async 框架做了一个 higher-level overview。</p>
<p>首先要理解的两个世界：同步的世界和异步的世界。他们截然不同，库不同，调用方式也不同，虽然可能会共用一些东西。同步的代码只能同步调用，异步的代码只能异步调度。如果非要在同步的代码里调用异步的，或者反之，那么就需要显式地添加胶水代码。</p>
<p>异步的代码在 event loop 中调用，代码被封装称 coroutines 来运行，coroutines 里面会一直同步运行直到运行到 await，然后暂停，被切出，event loop 会运行别的 coroutines。&lt;= 这套技术叫做 cooperative multitasking。其最大的麻烦点主要在于代码运行失败会是 silent failure。</p>
<p>一般我们这么区分代码：async def 的是异步，除此之外的是同步；<code>__init__</code> 一定要同步。</p>
<p>函数调用分四种：</p>
<ul>
<li>同步调同步：没啥好说 …</li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/fad1048c-829c-4f4c-94b3-111e2711ebd0.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/e9fabcfe-5dc0-471b-ba73-79ed108e8f64.html" rel="bookmark"
                                title="Permalink to 开发者是否要做 On-Call"
                                >开发者是否要做 On-Call</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://medium.com/@johnbarton/developers-on-call-68c94e6a762a">查看原文</a></p>
<p>@mipsytipsy  认为所谓工程不仅要开发服务更要维护服务，当然 on-call 不应该影响生活。作者认为很多公司 on-call 都做的很糟糕，不要学。团队之间应该互相帮助，提高软件质量，将职责完全推到另外一个工种那里不可取。例如，开发者自己出错，增加了别人的工作量，这个算谁的锅呢？</p>
<p>On-call 可以有一套流程来运作，例如额外工资，5-10 人的轮换阵容，只响应特定类型告警，on-call time 轮流休息，问题搞不定了 Escalate，开发团队有义务尽快修复，等等。其中，特别是 Paid On-Call 是构建稳定服务的重要制度，因为公司不可能不付出什么，就享受高稳定的服务。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/e9fabcfe-5dc0-471b-ba73-79ed108e8f64.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>

<p class="paginator">
        <a href="https://www.soasme.com/techshack.weekly/category/verses32.html">&laquo;</a>
    Page 33 / 54
        <a href="https://www.soasme.com/techshack.weekly/category/verses34.html">&raquo;</a>
</p>
            </section><!-- /#content -->

                </div>

                <hr>
                <div id="footer" class="col-lg-12">
                    <nav>
                        <ul>
                        </ul>
                    </nav>
                </div>
            </div>
            <div id="sidebar" class="col-lg-4">
                <h1>
                    <a href="https://www.soasme.com/techshack.weekly " title="Techshack Weekly">
                        <img src="https://www.soasme.com/techshack.weekly/images/logo-200x50.png" />
                    </a>
                </h1>
                <span class="description"> </span>
                <div><div class="entry-subscription">
    <h5>Techshack Weekly</h5>
    <br>
    专注于后端技术阅读
    <br>
    目前有上百位订阅者。
    <br>
    订阅 <a href="https://www.soasme.com/techshack.weekly/feeds/issues.atom.xml">RSS</a>
    <br>
    欢迎加入 <a href="https://t.me/techshack">Telegram Channel</a> ，
    <br>
    <iframe src="https://tgwidget.com/widget/count/?id=5a66b26483ba88e7118b4568" frameborder="0" scrolling="no" horizontalscrolling="no" verticalscrolling="no" width="160px" height="50px" async></iframe>
    <br>
    关注推特 <a href="https://twitter.com/techshackweekly">@techshackweekly</a>。
    <br>
    <a href="https://twitter.com/TechshackWeekly?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow @TechshackWeekly</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <hr>
</div></div>
                <div><!-- Begin MailChimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
    #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif;  width:250px;}
    /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
       We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://soasme.us17.list-manage.com/subscribe/post?u=617c1cb80ba1b0cbf828df387&amp;id=10442a8ee6" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
    <label for="mce-EMAIL">Subscribe to our mailing list</label>
    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_617c1cb80ba1b0cbf828df387_10442a8ee6" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup--></div>
                    <div>:: <a href="https://www.soasme.com/techshack.weekly/categories.html">Categories</a></div>
                <!-- <span class="feed"><a href="">RSS</a> | <a href="">Atom</a></span> -->
            </div>
            <div class="col-lg-2"></div>
        </div>
    </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-36183732-2");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>