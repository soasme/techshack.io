<!DOCTYPE html>
<html lang="en">
<head>
    <title>Techshack Weekly </title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://www.soasme.com/techshack.weekly/theme/css/main.css" type="text/css" />
        <link href="https://www.soasme.com/techshack.weekly/" type="application/atom+xml" rel="alternate" title="Techshack Weekly ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie.css"/>
                <script src="https://www.soasme.com/techshack.weekly/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie6.css"/><![endif]-->

</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-2"></div>
            <div id="content" class="col-lg-6">
                <div class="entry">
        
        

 
                <section id="content" class="body">
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/66872ca5-05d8-4ea6-a3f6-5f88566f69ea.html" rel="bookmark"
                                title="Permalink to Celery Task States"
                                >Celery Task States</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://www.distributedpython.com/2018/09/28/celery-task-states/">查看原文</a></p>
<p>Celery Task 默认有 PENDING STARTED SUCCESS FAILURE RETRY REVOKED 这六种状态。可以通过 <code>task.update_state(state='YOUR-CUSTOM-STATE', meta={})</code> 设置成自己想要的状态。这对于设置自定义的任务状态机很有用。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/66872ca5-05d8-4ea6-a3f6-5f88566f69ea.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/f40bef11-b6d1-4db9-99dd-2df1be24b5a8.html" rel="bookmark"
                                title="Permalink to Dropbox - The architecture of Nautilus"
                                >Dropbox - The architecture of Nautilus</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://blogs.dropbox.com/tech/2018/09/architecture-of-nautilus-the-new-dropbox-search-engine/">查看原文</a></p>
<p>本文介绍了 Dropbox 的搜索引擎：Nautilus。和 Web 搜索引擎不同，文件分享平台的搜索引擎设计需要处理的文档很多时候仅限某个个人用户可以查看，另外还需要追踪和更新文档的多个版本。系统设计的要求没别的，就是快点找到仅某个用户可以看到的文件，还有就是允许工程团队接入更多文件类型的流水线。架构图如下：</p>
<p><img alt="" src="https://dropboxtechblog.files.wordpress.com/2018/09/01-screenshot2018-06-06at10-55-32am.png?w=650&amp;h=475"></p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/f40bef11-b6d1-4db9-99dd-2df1be24b5a8.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/4d63250a-4d25-4cc7-bcd5-86d48a913307.html" rel="bookmark"
                                title="Permalink to Regex - Railroad Diagrams"
                                >Regex - Railroad Diagrams</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://regexper.com/documentation.html">查看原文</a></p>
<p>https://regexper.com 这个网站通过铁轨图将复杂正则表达式的图形化，也非常适合新手学习正则表达式。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/4d63250a-4d25-4cc7-bcd5-86d48a913307.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/ea48344e-74f2-466f-99c6-33c2e88f2419.html" rel="bookmark"
                                title="Permalink to Some possible career goals"
                                >Some possible career goals</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://jvns.ca/blog/2018/09/30/some-possible-career-goals/">查看原文</a></p>
<p>本文介绍了作为技术人，在技术，工作，产品，创业，沟通等方面的潜在目标，每个人追求各有不同，但本文覆盖了蛮多的选择。</p>
<ul>
<li>技术：成为领域专家 / 学习前沿技术 / 维护大项目 / 贡献开源项目 / 从头开始打造一个关键系统 / 理解复杂系统 / 快速造原型</li>
<li>工作：大公司 / 小公司 / 走 manager 路线 / 走技术路线（architect，senior，principle。。。） / 参与知名公司的软件编写</li>
<li>产品：打磨工具 / 写网站 / 内网工具 / 解决领域问题（例如天气）/ 开发者工具</li>
<li>沟通：写书 / 做演讲 / 做周边 / 写博客</li>
</ul>
<p>反正，每一种都能让技术人停不下来。</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/ea48344e-74f2-466f-99c6-33c2e88f2419.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/7ef97fec-bcba-44d4-b0dc-270af647cfe9.html" rel="bookmark"
                                title="Permalink to pypeln - Python data pipeline library"
                                >pypeln - Python data pipeline library</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://github.com/cgarciae/pypeln">查看原文</a></p>
<p>Pypeln 是一款基于 Processes, Threads and asyncio.Tasks 进行并发任务操作的库，旨在提供优雅的 API，而需求又不至于到要去用 Spark or Dask 的程度。</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pypeln</span> <span class="kn">import</span> <span class="n">process</span> <span class="k">as</span> <span class="n">pr</span>
<span class="n">stage</span> <span class="o">=</span> <span class="n">pr</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">task1</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">workers</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">maxsize</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">stage</span> <span class="o">=</span> <span class="n">pr</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">task2</span><span class="p">,</span> <span class="n">stage</span><span class="p">,</span> <span class="n">workers</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">stage</span><span class="p">)</span>
</code></pre></div>


<p>或者 </p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pypeln</span> <span class="kn">import</span> <span class="n">thread</span> <span class="k">as</span> <span class="n">th</span>
<span class="n">stage</span> <span class="o">=</span> <span class="n">th …</span></code></pre></div>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/7ef97fec-bcba-44d4-b0dc-270af647cfe9.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/fd0f7c62-cae2-418a-ba55-d3df3dda80fe.html" rel="bookmark"
                                title="Permalink to How does Dropbox rollout Python 3 for desktop applications"
                                >How does Dropbox rollout Python 3 for desktop applications</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://blogs.dropbox.com/tech/2018/09/how-we-rolled-out-one-of-the-largest-python-3-migrations-ever/">查看原文</a></p>
<p>本文描述了 Dropbox 如何将 macOS，Windows，和 Linux 客户端应用程序迁移到 Python 3.</p>
<ul>
<li>Python 带来的好处：类型注解，Coroutine。</li>
<li>挑战：发布客户端的 Freezers 脚本要应对 TypeScript/HTML, Rust, and Python, as well as Objective-C and C++ 的混合代码库。<ul>
<li>特别是近些年操作系统开始要求代码部署需要做签名，或者更新的 API（macOS FinderSync）</li>
</ul>
</li>
<li>解决方案：在各种打包工具不太好使的情况下，转投嵌入式 Python （Embedding Python）。这样可以基于特定操作系统的接口搭底层，然后往上套一层 Python，再往上运行业务逻辑。</li>
<li>发布分成3步<ul>
<li>客户端停用现有的 freezer scripts …</li></ul></li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/fd0f7c62-cae2-418a-ba55-d3df3dda80fe.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/5137f517-9d4e-476d-9898-772c1a4ca995.html" rel="bookmark"
                                title="Permalink to The Observability Pipeline"
                                >The Observability Pipeline</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://bravenewgeek.com/the-observability-pipeline/">查看原文</a></p>
<p>本文的话题是使用 The Observability Pipeline 帮助更好地理解系统。问题产生的背景是现代软件不再局限于裸机+Nagios 这种组合，而是趋向于 cloud-native and container-based systems。可能你 Debug 着，容器就被干没了。所以，要想解决这个问题，就得让应用自己传出结构化的日志记录用于分析 - 这产生了新问题：如何处理这些日志呢？结论是建一条 Observability Pipeline。</p>
<p>监控是关于known-unknowns and actionable alerts， observability 是关于 unknown-unknowns，并帮助开发更容易理解系统行为。以下是开发 The Observability Pipeline 的一些要点：</p>
<ul>
<li>确保日志是 Structured 的。你要写 spec，spec 要能区分 logs, metrics, traces, events …</li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/5137f517-9d4e-476d-9898-772c1a4ca995.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/6da74bc4-0bf3-466a-8fcb-b6c8043b99de.html" rel="bookmark"
                                title="Permalink to Inside cpyext - Why emulating CPython C API is so Hard"
                                >Inside cpyext - Why emulating CPython C API is so Hard</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://morepypy.blogspot.com/2018/09/inside-cpyext-why-emulating-cpython-c.html">查看原文</a></p>
<p>本文是 Pypy 更新的博文，探讨的是如何通过 cpyext 提升 Pypy 的 benchmark。</p>
<p>cpyext 是 Pypy 的组件，用于为 CPython C 插件运行在 Pypy 上提供兼容层。换句话说，在 C 插件中只要用到了 <code>Python.h</code> 这个依赖，那么在 Pypy 中其实就是在用 cpyext。现状是：cpyext 刚处于能用的状况，这些 C 插件运行在 Pypy 上其实比 CPython 还慢一些。</p>
<p>在 CPython 中，解释器使用的是引用计数，PyObject<em> 对象分配在堆上。当引用降到 0 时可以被安全 …</em></p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/6da74bc4-0bf3-466a-8fcb-b6c8043b99de.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/bbf54426-3f62-4798-b45c-bddfa1881417.html" rel="bookmark"
                                title="Permalink to Learning Go by Comparing to Python"
                                >Learning Go by Comparing to Python</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="http://govspy.peterbe.com/">查看原文</a></p>
<p>本文为 Python 使用者提供了一份与 Go 对比的 Cheat sheet。</p>
<ul>
<li><code>fmt.Println</code> v/s <code>print</code></li>
<li><code>fmt.Print</code> v/s <code>print(string, end='')</code></li>
<li><code>//</code>, <code>/* ... */</code> v/s <code>#</code>, <code>""" ... """</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="s">`This is </span>
<span class="s">a multi-line string.`</span>
</code></pre></div>


<p>v/s</p>
<div class="highlight"><pre><span></span><code><span class="sd">&quot;&quot;&quot;This is</span>
<span class="sd">a multi-line string.</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>


<ul>
<li>vector/list initialize: <code>var numbers [5]int</code> v/s <code>[0] * 5</code></li>
<li>slice: <code>some_numbers := numbers[1:3 …</code></li></ul>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/bbf54426-3f62-4798-b45c-bddfa1881417.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>


        

 
            <div>
                <article class="hentry">
                    <header>
                        <h3>
                            <a href="https://www.soasme.com/techshack.weekly/verses/d2fb6e41-2931-4443-8fa5-64c139c6ae58.html" rel="bookmark"
                                title="Permalink to Load Balancing for Latency"
                                >Load Balancing for Latency</a>
                        </h3>
                    </header>
                    <div class="entry-content">
                        <p><a href="https://blog.buoyant.io/2016/03/16/beyond-round-robin-load-balancing-for-latency/">查看原文</a></p>
<p>本文介绍了在某些特定情况下比 Round Robin 更适用的负载均衡算法。负载均衡要完成的两个大目标是：Scale(支持更多数量的 backend)，和 Resilience(坏掉的一些 backends 不影响服务总体)。本文探讨了如果引入 Latency 用于负载均衡也会有很不错的效果。一般健康检查校验服务是否挂了，而 Latency 能校验服务现在合不合适承接流量。本文的立论是：一个好的负载均衡也应该同等检查 failure 和 latency。</p>
<p>本文介绍的两种算法分别是： </p>
<ul>
<li>least loaded, 负载均衡维护每台机器的流量，路由新流量去负载最低的机器。</li>
<li>peak exponentially-weighted moving average (“peak EWMA”): 负载均衡维护每台机器的 round-trip time，需要的话乘上权重，路由新流量去平均响应时间最短的那台机器。</li>
</ul>
<p>一般最常见的还是 round robin；这两种算法见于 Twitter Finagle 的 RPC …</p>
                        <a class="readmore" href="https://www.soasme.com/techshack.weekly/verses/d2fb6e41-2931-4443-8fa5-64c139c6ae58.html"
                            >read more</a>
                    </div><!-- /.entry-content -->
                </article>
            </div>

<p class="paginator">
        <a href="https://www.soasme.com/techshack.weekly/category/verses5.html">&laquo;</a>
    Page 6 / 54
        <a href="https://www.soasme.com/techshack.weekly/category/verses7.html">&raquo;</a>
</p>
            </section><!-- /#content -->

                </div>

                <hr>
                <div id="footer" class="col-lg-12">
                    <nav>
                        <ul>
                        </ul>
                    </nav>
                </div>
            </div>
            <div id="sidebar" class="col-lg-4">
                <h1>
                    <a href="https://www.soasme.com/techshack.weekly " title="Techshack Weekly">
                        <img src="https://www.soasme.com/techshack.weekly/images/logo-200x50.png" />
                    </a>
                </h1>
                <span class="description"> </span>
                <div><div class="entry-subscription">
    <h5>Techshack Weekly</h5>
    <br>
    专注于后端技术阅读
    <br>
    目前有上百位订阅者。
    <br>
    订阅 <a href="https://www.soasme.com/techshack.weekly/feeds/issues.atom.xml">RSS</a>
    <br>
    欢迎加入 <a href="https://t.me/techshack">Telegram Channel</a> ，
    <br>
    <iframe src="https://tgwidget.com/widget/count/?id=5a66b26483ba88e7118b4568" frameborder="0" scrolling="no" horizontalscrolling="no" verticalscrolling="no" width="160px" height="50px" async></iframe>
    <br>
    关注推特 <a href="https://twitter.com/techshackweekly">@techshackweekly</a>。
    <br>
    <a href="https://twitter.com/TechshackWeekly?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow @TechshackWeekly</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <hr>
</div></div>
                <div><!-- Begin MailChimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
    #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif;  width:250px;}
    /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
       We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://soasme.us17.list-manage.com/subscribe/post?u=617c1cb80ba1b0cbf828df387&amp;id=10442a8ee6" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
    <label for="mce-EMAIL">Subscribe to our mailing list</label>
    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_617c1cb80ba1b0cbf828df387_10442a8ee6" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup--></div>
                    <div>:: <a href="https://www.soasme.com/techshack.weekly/categories.html">Categories</a></div>
                <!-- <span class="feed"><a href="">RSS</a> | <a href="">Atom</a></span> -->
            </div>
            <div class="col-lg-2"></div>
        </div>
    </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-36183732-2");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>