<!DOCTYPE html>
<html lang="en">
<head>
    <title>Techshack Weekly - 从 inode 出发了解文件系统的大部分概念</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://www.soasme.com/techshack.weekly/theme/css/main.css" type="text/css" />
        <link href="https://www.soasme.com/techshack.weekly/" type="application/atom+xml" rel="alternate" title="Techshack Weekly ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie.css"/>
                <script src="https://www.soasme.com/techshack.weekly/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie6.css"/><![endif]-->

</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-2"></div>
            <div id="content" class="col-lg-6">
                <div class="entry">
<section id="content" class="body">
  <header>
    <h2 class="entry-title">从 inode 出发了解文件系统的大部分概念</h2>
  </header>
  <div class="entry-content">
        <p><a href="http://www.linfo.org/inode.html">查看原文</a></p>
<p>本文从 inode 开始解释所有文件系统的概念，是对新手来说很好的文章，每个概念都只花了大约一句话，像 main 函数调用触发了所有子函数一样精美，如果用两个词来描述这篇文章，那就是 very cool。</p>
<ul>
<li>inode 是数据结构，由 Linux 和其它 Unix-like 操作系统里的文件系统提供，存储除了文件名和文件内容外的所有信息。</li>
<li>数据结构是 c struct，可以存储多种数据类型（例如整型，浮点，等等）。</li>
<li>文件系统是关于目录的层级结构， 也叫目录树，这些目录用于组织文件。</li>
<li>文件是一个有名字的，用户层面上看数据是连续块的，在存储器(storage)里被持久化存储的信息。</li>
<li>文件的元信息是关于文件非内容部分的信息，包括文件大小，物理位置（存储器块的地址），文件 owner，group，权限，几种时间戳，以及指向 inode 的硬链接的引用计数。</li>
<li>存储器是长时间存储数据的中介，例如硬盘和磁带。这个时间可以是数年或数十年。</li>
<li>目录是文件，类型是DIR，内容是其下的文件的文件名到 inode 的映射表。</li>
<li>创建文件时，发生的事情是：分配文件系统里一个唯一的 inode number 数字给文件名，将这个键值对写到父亲目录的内容里。</li>
<li>用户或程序根据文件名找文件，发生的事情是：操作系统根据文件名逐级查找 inode。</li>
<li>硬链接是目录表中的一个条目，文件名对应的 inode number 指向已经存在的文件的 inode。</li>
<li>空间不够，可以是硬盘不够，也可能是文件系统放不下那么多 inode 节点（硬盘可能还够，多发生于小文件太多）</li>
<li>ls 可以查看 file inode number: <code>ls -i</code>。ls 默认列出当前目录的所有对象。</li>
<li>当前目录是用户目前在文件系统上工作的目录。</li>
<li>df 可以查看 inode 的挂载的文件名字和大小对应关系，其中 -h 可以查看带单位的大小。特别地，df 可以查看还剩下多少 inode 可以被挂载。</li>
<li>挂载是指逻辑上连接上文件系统。</li>
</ul>
<p>衍生思考：这篇文章本身的组织结构就像一棵树，就像它介绍的 file system，非常棒！</p>

  </div><!-- /.entry-content -->
</section>
                </div>

                <hr>
                <div id="footer" class="col-lg-12">
                    <nav>
                        <ul>
                        </ul>
                    </nav>
                </div>
            </div>
            <div id="sidebar" class="col-lg-4">
                <h1>
                    <a href="https://www.soasme.com/techshack.weekly " title="Techshack Weekly">
                        <img src="https://www.soasme.com/techshack.weekly/images/logo-200x50.png" />
                    </a>
                </h1>
                <span class="description"> </span>
                <div><div class="entry-subscription">
    <h5>Techshack Weekly</h5>
    <br>
    专注于后端技术阅读
    <br>
    目前有上百位订阅者。
    <br>
    订阅 <a href="https://www.soasme.com/techshack.weekly/feeds/issues.atom.xml">RSS</a>
    <br>
    欢迎加入 <a href="https://t.me/techshack">Telegram Channel</a> ，
    <br>
    <iframe src="https://tgwidget.com/widget/count/?id=5a66b26483ba88e7118b4568" frameborder="0" scrolling="no" horizontalscrolling="no" verticalscrolling="no" width="160px" height="50px" async></iframe>
    <br>
    关注推特 <a href="https://twitter.com/techshackweekly">@techshackweekly</a>。
    <br>
    <a href="https://twitter.com/TechshackWeekly?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow @TechshackWeekly</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <hr>
</div></div>
                <div><!-- Begin MailChimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
    #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif;  width:250px;}
    /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
       We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://soasme.us17.list-manage.com/subscribe/post?u=617c1cb80ba1b0cbf828df387&amp;id=10442a8ee6" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
    <label for="mce-EMAIL">Subscribe to our mailing list</label>
    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_617c1cb80ba1b0cbf828df387_10442a8ee6" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup--></div>
                    <div>:: <a href="https://www.soasme.com/techshack.weekly/categories.html">Categories</a></div>
                <!-- <span class="feed"><a href="">RSS</a> | <a href="">Atom</a></span> -->
            </div>
            <div class="col-lg-2"></div>
        </div>
    </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-36183732-2");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>