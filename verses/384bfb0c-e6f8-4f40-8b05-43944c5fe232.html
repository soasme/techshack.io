<!DOCTYPE html>
<html lang="en">
<head>
    <title>Techshack Weekly - Helm Cheatsheet</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://www.soasme.com/techshack.weekly/theme/css/main.css" type="text/css" />
        <link href="https://www.soasme.com/techshack.weekly/" type="application/atom+xml" rel="alternate" title="Techshack Weekly ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie.css"/>
                <script src="https://www.soasme.com/techshack.weekly/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie6.css"/><![endif]-->

</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-2"></div>
            <div id="content" class="col-lg-6">
                <div class="entry">
<section id="content" class="body">
  <header>
    <h2 class="entry-title">Helm Cheatsheet</h2>
  </header>
  <div class="entry-content">
        <p><a href="https://docs.helm.sh/using_helm/">查看原文</a></p>
<p>本文是 Kubernetes 部署工具 Helm 的使用指南，描述了它的基本使用场景。</p>
<ul>
<li>使用前提：<ul>
<li>有 Kubernetes cluster，本地 kubectl 都配置好了可以连上需要的集群，可以使用 <code>kubectl config current-context</code> 查看是否正确。</li>
<li>minikube 不需要额外配置</li>
<li>coreos 需要有 socat 安装。</li>
</ul>
</li>
<li>Helm init: <ul>
<li>在 minikube 中使用 Helm 无所谓啦，用默认配置就成，没有安全方面的考量；否则是需要额外做一些安全方面的配置，例如 rbac，tls 等等。</li>
<li>helm init 会在 k8s 中启动 tiller</li>
</ul>
</li>
<li>重置 helm：<code>helm reset</code><ul>
<li>helm 重新安装没关系，因为数据存在 configmap 中。</li>
</ul>
</li>
<li>升级 helm：<code>helm init --upgrade</code></li>
<li>使用非默认的 k8s 集群：<code>helm init --kube-context xxx</code></li>
<li>安装一个 chart：<code>helm install stable/mysql</code>。stable 可在 https://github.com/kubernetes/charts 中查看。<ul>
<li>可以写自定义的 chart 配置，然后用 <code>-f</code> 选项导入：<code>helm install -f path/to/conf.yml stable/mysql</code></li>
</ul>
</li>
<li>查看 chart：<code>helm inspect stable/mysql</code></li>
<li>查看所有安装的应用：<code>helm ls</code></li>
<li>删除：<code>helm delete your-app</code>；可以用 <code>helm rollback</code> 回滚删除，除非你用了 <code>helm delete --purge</code></li>
<li>3 个概念：<ul>
<li>Chart，helm package。就像 wheel，rpm，gem 包。</li>
<li>Repository，就像 PyPI，CPAN，rubygems 一样的地方。</li>
<li>Release，chart instance。一个 chart 可以被安装多次.</li>
</ul>
</li>
<li>查找包：<code>helm search xxxx</code></li>
<li>查看状态：<code>helm status xxx</code></li>
<li>查看 repo：<code>helm repo list</code></li>
<li>新建 helm chart：<code>helm create new-chart</code></li>
<li>打包：<code>helm package new-chart</code></li>
</ul>

  </div><!-- /.entry-content -->
</section>
                </div>

                <hr>
                <div id="footer" class="col-lg-12">
                    <nav>
                        <ul>
                        </ul>
                    </nav>
                </div>
            </div>
            <div id="sidebar" class="col-lg-4">
                <h1>
                    <a href="https://www.soasme.com/techshack.weekly " title="Techshack Weekly">
                        <img src="https://www.soasme.com/techshack.weekly/images/logo-200x50.png" />
                    </a>
                </h1>
                <span class="description"> </span>
                <div><div class="entry-subscription">
    <h5>Techshack Weekly</h5>
    <br>
    专注于后端技术阅读
    <br>
    目前有上百位订阅者。
    <br>
    订阅 <a href="https://www.soasme.com/techshack.weekly/feeds/issues.atom.xml">RSS</a>
    <br>
    欢迎加入 <a href="https://t.me/techshack">Telegram Channel</a> ，
    <br>
    <iframe src="https://tgwidget.com/widget/count/?id=5a66b26483ba88e7118b4568" frameborder="0" scrolling="no" horizontalscrolling="no" verticalscrolling="no" width="160px" height="50px" async></iframe>
    <br>
    关注推特 <a href="https://twitter.com/techshackweekly">@techshackweekly</a>。
    <br>
    <a href="https://twitter.com/TechshackWeekly?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow @TechshackWeekly</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <hr>
</div></div>
                <div><!-- Begin MailChimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
    #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif;  width:250px;}
    /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
       We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://soasme.us17.list-manage.com/subscribe/post?u=617c1cb80ba1b0cbf828df387&amp;id=10442a8ee6" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
    <label for="mce-EMAIL">Subscribe to our mailing list</label>
    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_617c1cb80ba1b0cbf828df387_10442a8ee6" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup--></div>
                    <div>:: <a href="https://www.soasme.com/techshack.weekly/categories.html">Categories</a></div>
                <!-- <span class="feed"><a href="">RSS</a> | <a href="">Atom</a></span> -->
            </div>
            <div class="col-lg-2"></div>
        </div>
    </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-36183732-2");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>