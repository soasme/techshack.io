<!DOCTYPE html>
<html lang="en">
<head>
    <title>Techshack Weekly - Chaostoolkit - Python Chaos Engineering Toolkit</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://www.soasme.com/techshack.weekly/theme/css/main.css" type="text/css" />
        <link href="https://www.soasme.com/techshack.weekly/" type="application/atom+xml" rel="alternate" title="Techshack Weekly ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie.css"/>
                <script src="https://www.soasme.com/techshack.weekly/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie6.css"/><![endif]-->

</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-2"></div>
            <div id="content" class="col-lg-6">
                <div class="entry">
<section id="content" class="body">
  <header>
    <h2 class="entry-title">Chaostoolkit - Python Chaos Engineering Toolkit</h2>
  </header>
  <div class="entry-content">
        <p><a href="https://github.com/chaostoolkit/chaostoolkit">查看原文</a></p>
<p>本文介绍了一个使用 Python 编写的通用 Chaos Engineering 框架，它的设计目标是简单快速地在运行着的系统上做 chaos 实验， 整个 toolkit 使用很普通的 pip 安装，不需要向 ChaosMonkey 那样有很多 Java 系的依赖，居家测试推荐。</p>
<p>它基于的原理是 <a href="https://www.soasme.com/techshack.weekly/verses/f1ba35aa-1544-456c-8e44-8c7010cef216.html">principle of chaos</a>, 它的使用颇为简单：编写 json／yaml 配置文件，编写插件，然后运行 <code>chaos run experiment.json</code>. 它默认提供了不少插件，例如 kubernetes，prometheus 等等。</p>
<p>举个例子, 👇 这段 JSON 配置说我们要杀掉一个 k8s pod，pause 5 秒。在这期间我们可以通过 <code>microservice_available_and_healthy</code> 方法来检查所有应用是否仍然是存活健康的：</p>
<div class="highlight"><pre><span></span><code><span class="err">{</span>
<span class="err">    &quot;name&quot;: &quot;all-our-microservices-should-be-healthy&quot;,</span>
<span class="err">    &quot;provider&quot;: {</span>
<span class="err">        &quot;type&quot;: &quot;python&quot;,</span>
<span class="err">        &quot;module&quot;: &quot;chaosk8s.probes&quot;,</span>
<span class="err">        &quot;func&quot;: &quot;microservice_available_and_healthy&quot;,</span>
<span class="err">        &quot;arguments&quot;: {</span>
<span class="err">            &quot;name&quot;: &quot;myapp&quot;,</span>
<span class="err">            &quot;ns&quot;: &quot;myns&quot;</span>
<span class="err">        }</span>
<span class="err">    }</span>
<span class="err">},</span>
<span class="err">{</span>
<span class="err">    &quot;type&quot;: &quot;action&quot;,</span>
<span class="err">    &quot;name&quot;: &quot;terminate-db-pod&quot;,</span>
<span class="err">    &quot;provider&quot;: {</span>
<span class="err">        &quot;type&quot;: &quot;python&quot;,</span>
<span class="err">        &quot;module&quot;: &quot;chaosk8s.pod.actions&quot;,</span>
<span class="err">        &quot;func&quot;: &quot;terminate_pods&quot;,</span>
<span class="err">        &quot;arguments&quot;: {</span>
<span class="err">            &quot;label_selector&quot;: &quot;app=my-app&quot;,</span>
<span class="err">            &quot;name_pattern&quot;: &quot;my-app-[0-9]$&quot;,</span>
<span class="err">            &quot;rand&quot;: true,</span>
<span class="err">            &quot;ns&quot;: &quot;default&quot;</span>
<span class="err">        }</span>
<span class="err">    },</span>
<span class="err">    &quot;pauses&quot;: {</span>
<span class="err">        &quot;after&quot;: 5</span>
<span class="err">    }</span>
<span class="err">}</span>
</code></pre></div>

  </div><!-- /.entry-content -->
</section>
                </div>

                <hr>
                <div id="footer" class="col-lg-12">
                    <nav>
                        <ul>
                        </ul>
                    </nav>
                </div>
            </div>
            <div id="sidebar" class="col-lg-4">
                <h1>
                    <a href="https://www.soasme.com/techshack.weekly " title="Techshack Weekly">
                        <img src="https://www.soasme.com/techshack.weekly/images/logo-200x50.png" />
                    </a>
                </h1>
                <span class="description"> </span>
                <div><div class="entry-subscription">
    <h5>Techshack Weekly</h5>
    <br>
    专注于后端技术阅读
    <br>
    目前有上百位订阅者。
    <br>
    订阅 <a href="https://www.soasme.com/techshack.weekly/feeds/issues.atom.xml">RSS</a>
    <br>
    欢迎加入 <a href="https://t.me/techshack">Telegram Channel</a> ，
    <br>
    <iframe src="https://tgwidget.com/widget/count/?id=5a66b26483ba88e7118b4568" frameborder="0" scrolling="no" horizontalscrolling="no" verticalscrolling="no" width="160px" height="50px" async></iframe>
    <br>
    关注推特 <a href="https://twitter.com/techshackweekly">@techshackweekly</a>。
    <br>
    <a href="https://twitter.com/TechshackWeekly?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow @TechshackWeekly</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <hr>
</div></div>
                <div><!-- Begin MailChimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
    #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif;  width:250px;}
    /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
       We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://soasme.us17.list-manage.com/subscribe/post?u=617c1cb80ba1b0cbf828df387&amp;id=10442a8ee6" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
    <label for="mce-EMAIL">Subscribe to our mailing list</label>
    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_617c1cb80ba1b0cbf828df387_10442a8ee6" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup--></div>
                    <div>:: <a href="https://www.soasme.com/techshack.weekly/categories.html">Categories</a></div>
                <!-- <span class="feed"><a href="">RSS</a> | <a href="">Atom</a></span> -->
            </div>
            <div class="col-lg-2"></div>
        </div>
    </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-36183732-2");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>