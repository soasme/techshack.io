<!DOCTYPE html>
<html lang="en">
<head>
    <title>Techshack Weekly - SELinux 介绍</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://www.soasme.com/techshack.weekly/theme/css/main.css" type="text/css" />
        <link href="https://www.soasme.com/techshack.weekly/" type="application/atom+xml" rel="alternate" title="Techshack Weekly ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie.css"/>
                <script src="https://www.soasme.com/techshack.weekly/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://www.soasme.com/techshack.weekly/css/ie6.css"/><![endif]-->

</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-2"></div>
            <div id="content" class="col-lg-6">
                <div class="entry">
<section id="content" class="body">
  <header>
    <h2 class="entry-title">SELinux 介绍</h2>
  </header>
  <div class="entry-content">
        <p><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/security-enhanced_linux/chap-security-enhanced_linux-introduction#sect-Security-Enhanced_Linux-Introduction-Benefits_of_running_SELinux">查看原文</a></p>
<p>Security-Enhanced Linux (SELinux) 是在 Linux 内核中设计的一套 Access Control 机制，即便你可以通过 user, group, rwx 这些权限检查，你还得通过 SELinux 定制的 policies 的检查才能执行命令成功。</p>
<p>大部分操作系统一般使用 Discretionary Access Control (DAC). 它把目录设备和 objects 挂钩，进程 和 subjects 挂钩，DAC 就是控制 subjects 和 objects 二者怎么互相交互。</p>
<p>SELinux 觉得还不够，要引入更多，所以使用了 Mandatory Access Contro (MAC)。因为只基于用户 id 和所有权，还有很多安全隐患没有考虑到，例如说用户的角色，程序的功能，数据敏感度等等。以下是未起用 SELinux 的文件权限</p>
<div class="highlight"><pre><span></span><code><span class="err">~]$ ls -l file1</span>
<span class="err">-rwxrw-r-- 1 user1 group1 0 2009-08-30 11:03 file1</span>
</code></pre></div>


<p>起用了 SELinux 后，文件可以通过 -Z 来查看权限。可以看到 SELinux 提供了四个级别的权限控制：user, role, type, level. 以下例子分别对应 unconfined_u, object_r, user_home_t, s0. 注意这里的 SELinux User 和 Linux user 是两种不同的概念。</p>
<div class="highlight"><pre><span></span><code><span class="err">~]$ ls -Z file1</span>
<span class="err">-rwxrw-r--  user1 group1 unconfined_u:object_r:user_home_t:s0      file1</span>
</code></pre></div>


<p>MAC, DAC 区别</p>
<ul>
<li>DAC 只基于 Linux user, group id 检查, MAC 基于 user, role, type, level 检查。</li>
<li>MAC 规则会在 DAC 规则之后检查，DAC 检查没过也不会检查 MAC</li>
</ul>
<p>SELinux 的特点：</p>
<ul>
<li>所有进程和文件都被打上一个标签：type 。进程会根据 type 跑在自己的 domain 下，并根据 rules 只能处理特定类型的文件和其它进程。</li>
<li>ACL 粒度更细了。</li>
<li>系统级别的管控</li>
<li>减少 privilege escalation attack 发生的风险。举个例子，Apache 被攻破了，攻击者还是无法读取到 user home directories 下的文件。</li>
</ul>

  </div><!-- /.entry-content -->
</section>
                </div>

                <hr>
                <div id="footer" class="col-lg-12">
                    <nav>
                        <ul>
                        </ul>
                    </nav>
                </div>
            </div>
            <div id="sidebar" class="col-lg-4">
                <h1>
                    <a href="https://www.soasme.com/techshack.weekly " title="Techshack Weekly">
                        <img src="https://www.soasme.com/techshack.weekly/images/logo-200x50.png" />
                    </a>
                </h1>
                <span class="description"> </span>
                <div><div class="entry-subscription">
    <h5>Techshack Weekly</h5>
    <br>
    专注于后端技术阅读
    <br>
    目前有上百位订阅者。
    <br>
    订阅 <a href="https://www.soasme.com/techshack.weekly/feeds/issues.atom.xml">RSS</a>
    <br>
    欢迎加入 <a href="https://t.me/techshack">Telegram Channel</a> ，
    <br>
    <iframe src="https://tgwidget.com/widget/count/?id=5a66b26483ba88e7118b4568" frameborder="0" scrolling="no" horizontalscrolling="no" verticalscrolling="no" width="160px" height="50px" async></iframe>
    <br>
    关注推特 <a href="https://twitter.com/techshackweekly">@techshackweekly</a>。
    <br>
    <a href="https://twitter.com/TechshackWeekly?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow @TechshackWeekly</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <hr>
</div></div>
                <div><!-- Begin MailChimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
    #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif;  width:250px;}
    /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
       We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://soasme.us17.list-manage.com/subscribe/post?u=617c1cb80ba1b0cbf828df387&amp;id=10442a8ee6" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
    <label for="mce-EMAIL">Subscribe to our mailing list</label>
    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_617c1cb80ba1b0cbf828df387_10442a8ee6" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup--></div>
                    <div>:: <a href="https://www.soasme.com/techshack.weekly/categories.html">Categories</a></div>
                <!-- <span class="feed"><a href="">RSS</a> | <a href="">Atom</a></span> -->
            </div>
            <div class="col-lg-2"></div>
        </div>
    </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-36183732-2");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>